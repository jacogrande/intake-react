(this.webpackJsonpintake=this.webpackJsonpintake||[]).push([[0],{122:function(e,t,a){},164:function(e,t,a){},227:function(e,t,a){},266:function(e,t,a){},313:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},400:function(e,t,a){e.exports=a(619)},405:function(e,t,a){},406:function(e,t,a){},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){},477:function(e,t,a){},479:function(e,t,a){},616:function(e,t,a){},617:function(e,t,a){},619:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),o=(a(405),a(14)),c=a(43),s=a(22),u=(a(406),a(407),a(408),a(409),a(3)),m=a(682),d=a(683),p=a(695),f=a(679),v=a(699),E=a(696),g=a(681),b=a(329),h=a.n(b),N=a(88),y=a.n(N),w=a(240),k=a.n(w),S=a(327),x=a.n(S),O=a(241),_=a.n(O),j=a(328),C=a.n(j),D=a(7),T=a.n(D),A=a(19),M=a(62),R=a.n(M),B=function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/movies/omdb/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=10;break}return e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n.results);case 10:throw new Error("invalid search");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=(a(266),a(33)),L=a(171),I=a.n(L),U=(a(267),a(698)),P=a(170),Y=a.n(P),V=function(e){return r.a.createElement(U.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:6e3,onClose:e.handleClose,message:e.error?e.error:e.success,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{size:"small","aria-label":"close",color:"inherit",onClick:e.handleClose},r.a.createElement(Y.a,{fontSize:"small"})))})},W=a(25);function H(e,t){return{type:e,payload:t}}var G={username:null,upvoted_reviews:null,avatar:null,reviews:null,friends:[],friend_requests:[],favorite_movie:null,guest:null,_id:null},q=function(e){return H("user/LOGIN",e)},z=function(){return H("user/LOGOUT")},J=function(e){return H("user/ADD_FRIEND",e)},K=function(){return console.log("logging in"),function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/checkSession");case 2:return a=e.sent,e.next=5,a.json();case 5:(n=e.sent).username?t(q(n)):t(H("user/LOGIN_GUEST"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var X={genres:null,contentRatings:null,datesAdded:null,releaseDates:null,themes:null,ratings:null},Z=function(e){return H("stats/SET_GENRES",e)},$=function(e){return H("stats/SET_CONTENT_RATINGS",e)},Q=function(e){return H("stats/SET_DATES_ADDED",e)},ee=function(e){return H("stats/SET_RELEASE_DATES",e)},te=function(e){return H("stats/SET_THEMES",e)},ae=function(e){return H("stats/SET_RATINGS",e)};var ne={movies:null,topMoviesByPopularity:null,topMoviesByEntertainment:null,topMoviesByBias:null,topMoviesByPlot:null,topMoviesByStyle:null,topMoviesByTotal:null,filter:"popularity",search:"",searchResults:[]},re=function(e){return H("movies/SET_SEARCH",e)},le=function(e){return H("movies/SET_SEARCH_RESULTS",e)},ie=function(e){return function(){var t=Object(A.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(re(e)),!e){t.next=16;break}return t.next=4,fetch("/api/movies/search/".concat(e));case 4:n=t.sent,t.t0=n.status,t.next=200===t.t0?8:12;break;case 8:return t.next=10,n.json();case 10:return r=t.sent,t.abrupt("return",a(le(r)));case 12:return console.error("error searching for movies"),t.abrupt("return",a(le([])));case 14:t.next=17;break;case 16:a(le([]));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},oe=function(e,t){return H("movies/SET_TOP_MOVIES",{filter:e,movies:t})},ce=function(e){return H("movies/SET_FILTER",e)},se=function(){var e=Object(A.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/movies/getTopMovies/".concat(t));case 2:a=e.sent,e.t0=a.status,e.next=200===e.t0?6:9;break;case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:console.error("error fetching top movies");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(e){return function(){var t=Object(A.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e||(e="popularity"),t.next=4,se(e);case 4:n=t.sent,a(oe(e,n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},me=function(e){return H("movies/SET_MOVIES",e)},de=function(){return function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(H("stats/CLEAR_STORE")),t(me(null)),e.next=4,fetch("/api/movies");case 4:a=e.sent,e.t0=a.status,e.next=200===e.t0?8:401===e.t0?13:15;break;case 8:return e.next=10,a.json();case 10:return n=e.sent,t(me(n)),e.abrupt("break",16);case 13:return console.log("logout"),e.abrupt("break",16);case 15:console.log("error fetching movies");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};var pe=a(17),fe=Object(pe.b)((function(e){return{movies:e.movies.movies,username:e.user.username}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t=r.a.useState(""),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(""),c=Object(u.a)(i,2),s=c[0],m=c[1],d=r.a.useState(""),p=Object(u.a)(d,2),f=p[0],v=p[1],E=r.a.useState(""),g=Object(u.a)(E,2),b=g[0],h=g[1],N=r.a.useState(new Date),y=Object(u.a)(N,2),w=y[0],k=y[1],S=r.a.useState([]),x=Object(u.a)(S,2),O=x[0],_=x[1],j=r.a.useState(""),C=Object(u.a)(j,2),D=C[0],M=C[1],R=r.a.useState(!1),B=Object(u.a)(R,2),L=B[0],U=B[1];if(!e.username)return r.a.createElement("div",{className:"rate-movie"},r.a.createElement("img",{src:e.movie.poster,alt:e.movie.title,className:"poster"}),r.a.createElement("h2",null,e.movie.title),r.a.createElement("p",{className:"grey italics"},r.a.createElement(o.c,{to:"/login",className:"link green"},"Login")," ","or"," ",r.a.createElement(o.c,{to:"/createAccount",className:"link green"},"create an account")," ","to add this movie."));var P=function(){var t=Object(A.a)(T.a.mark((function t(a){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("/api/movies/addExistingMovie",{method:"post",body:JSON.stringify({id:e.movie._id,entertainment_rating:parseInt(n)||0,plot_rating:parseInt(s)||0,style_rating:parseInt(f)||0,bias_rating:parseInt(b)||0,themes:O,date:w,movie:e.movie}),headers:{"Content-Type":"application/json"}});case 3:r=t.sent,t.t0=r.status,t.next=200===t.t0?7:11;break;case 7:return console.log("success"),e.loadMovies(),e.closeDrawer(),t.abrupt("break",14);case 11:M("Unable to add movie. Try again later."),U(!0),console.error("error saving movie");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=[{title:"Entertainment",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);l(t<=5?e.target.value:n)}else l("")},value:n},{title:"Writing",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);m(t<=5?e.target.value:s)}else m("")},value:s},{title:"Style",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);v(t<=5?e.target.value:f)}else v("")},value:f},{title:"Bias",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);h(t<=5?e.target.value:b)}else h("")},value:b}];return r.a.createElement("div",{className:"rate-movie"},r.a.createElement("img",{src:e.movie.poster,alt:e.movie.title,className:"poster"}),r.a.createElement("h2",null,e.movie.title),r.a.createElement("form",{autoComplete:"off",onSubmit:P},Y.map((function(e,t){return r.a.createElement("div",{key:e.title,className:"row margin-top"},r.a.createElement("label",{id:"".concat(e.title,"Label"),className:"green col text-right"},e.title,":"),r.a.createElement("div",{className:"col text-left"},r.a.createElement("input",{type:"string",className:"small-input","aria-labelledby":"".concat(e.title,"Label"),value:e.value,onChange:e.changeHandler})," ",r.a.createElement("span",{className:"grey"},"/ 5")))})),O.map((function(e,t){return r.a.createElement("div",{key:"theme-".concat(t),className:"fade-in"},r.a.createElement("input",{type:"string",placeholder:"theme",className:"margin-top",value:e,onChange:function(e){return function(e,t){var a=Object(F.a)(O);a[e]=t.target.value,_(a)}(t,e)}}),r.a.createElement("button",{className:"button-escape margin-top","aria-label":"delete theme",onClick:function(){return function(e){var t=Object(F.a)(O);t.splice(e,1),_(t)}(t)}},"\xd7"))})),r.a.createElement("button",{type:"button",className:"button-submit margin-top",onClick:function(e){_((function(e){return[].concat(Object(F.a)(e),[""])}))}},"+ Add Theme"),r.a.createElement("div",{className:"text-centered margin-top"},r.a.createElement("label",{id:"datePickerLabel",className:"green text-right"},"Date Viewed:"," "),r.a.createElement(I.a,{selected:w,onChange:function(e){return k(e)}})),r.a.createElement("div",{className:"inline-flex full-width row-reverse margin-top"},r.a.createElement("button",{type:"submit",className:"button-submit"},"Submit"),r.a.createElement("button",{onClick:e.closeDrawer,type:"button",className:"button-cancel margin-right"},"Cancel")),r.a.createElement("div",{className:"vertical-padding"})),r.a.createElement(V,{error:D,success:"Movie added.",handleClose:function(){return U(!1)},open:L}))})),ve=Object(pe.b)((function(e){return{movies:e.movies.movies}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t=r.a.useState(""),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(""),o=Object(u.a)(i,2),c=o[0],s=o[1],m=r.a.useState(""),d=Object(u.a)(m,2),p=d[0],f=d[1],v=r.a.useState(""),E=Object(u.a)(v,2),g=E[0],b=E[1],h=r.a.useState(new Date),N=Object(u.a)(h,2),y=N[0],w=N[1],k=r.a.useState([]),S=Object(u.a)(k,2),x=S[0],O=S[1],_=function(){var t=Object(A.a)(T.a.mark((function t(a){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("submitted"),t.next=4,fetch("/api/movies",{method:"post",body:JSON.stringify({imdbid:e.movie.imdbID,entertainment_rating:parseInt(n)||0,plot_rating:parseInt(c)||0,style_rating:parseInt(p)||0,bias_rating:parseInt(g)||0,themes:x,date:y}),headers:{"Content-Type":"application/json"}});case 4:r=t.sent,t.t0=r.status,t.next=200===t.t0?8:400===t.t0?12:14;break;case 8:return console.log("movie successfully added"),e.closeDrawer(),e.loadMovies(),t.abrupt("break",15);case 12:return console.log("movie already seen"),t.abrupt("break",15);case 14:console.log("unknown error");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=[{title:"Entertainment",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);l(t<=5?e.target.value:n)}else l("")},value:n},{title:"Writing",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);s(t<=5?e.target.value:c)}else s("")},value:c},{title:"Style",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);f(t<=5?e.target.value:p)}else f("")},value:p},{title:"Bias",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);b(t<=5?e.target.value:g)}else b("")},value:g}];return r.a.createElement("div",{className:"rate-movie"},r.a.createElement("img",{src:e.movie.Poster,alt:e.movie.Title,className:"poster"}),r.a.createElement("h2",null,e.movie.Title),r.a.createElement("form",{autoComplete:"off",onSubmit:_,id:"rate-movie-form"},j.map((function(e,t){return r.a.createElement("div",{key:e.title,className:"row margin-top"},r.a.createElement("label",{id:"".concat(e.title,"Label"),className:"green col text-right"},e.title,":"),r.a.createElement("div",{className:"col text-left"},r.a.createElement("input",{type:"string",className:"small-input","aria-labelledby":"".concat(e.title,"Label"),value:e.value,onChange:e.changeHandler})," ",r.a.createElement("span",{className:"grey"},"/ 5")))})),x.map((function(e,t){return r.a.createElement("div",{key:"theme-".concat(t),className:"fade-in"},r.a.createElement("input",{type:"string",placeholder:"theme",className:"margin-top",value:e,onChange:function(e){return function(e,t){var a=Object(F.a)(x);a[e]=t.target.value,O(a)}(t,e)}}),r.a.createElement("button",{className:"button-escape margin-top","aria-label":"delete theme",onClick:function(){return function(e){var t=Object(F.a)(x);t.splice(e,1),O(t)}(t)}},"\xd7"))})),r.a.createElement("button",{type:"button",className:"button-submit margin-top",onClick:function(e){O((function(e){return[].concat(Object(F.a)(e),[""])}))}},"+ Add Theme"),r.a.createElement("div",{className:"text-centered margin-top"},r.a.createElement("label",{id:"datePickerLabel",className:"green text-right"},"Date Viewed:"," "),r.a.createElement(I.a,{selected:y,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"inline-flex full-width row-reverse margin-top"},r.a.createElement("button",{type:"submit",className:"button-submit"},"Submit"),r.a.createElement("button",{onClick:e.closeDrawer,type:"button",className:"button-cancel margin-right"},"Cancel")),r.a.createElement("div",{className:"vertical-padding"})))})),Ee=function(e){var t=r.a.useState(""),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState([]),o=Object(u.a)(i,2),c=o[0],s=o[1],m=r.a.useState(null),d=Object(u.a)(m,2),p=d[0],f=d[1],v=function(){var e=Object(A.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!n){e.next=8;break}return e.next=5,B(n);case 5:a=e.sent,s(a),f(null);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return e.propMovie?r.a.createElement("div",{className:"drawer-content"},r.a.createElement("div",{className:"drawer-header"},r.a.createElement("h2",{id:"movieSearchLabel"},"Add Movie")),r.a.createElement("div",{className:"drawer-body text-centered"},r.a.createElement(fe,{movie:e.propMovie,closeDrawer:e.closeDrawer}))):r.a.createElement("div",{className:"drawer-content"},r.a.createElement("div",{className:"drawer-header"},r.a.createElement("h2",{id:"movieSearchLabel"},"Add Movie")),r.a.createElement("div",{className:"drawer-body"},r.a.createElement("form",{autoComplete:"off",onSubmit:v},r.a.createElement("div",{className:"inline-flex full-width"},r.a.createElement(R.a,null),r.a.createElement("input",{type:"text","aria-labelledby":"movieSearchLabel",placeholder:"Search",className:"full-width",id:"searchInput",value:n,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",{className:"inline-flex full-width row-reverse margin-top"},r.a.createElement("button",{type:"submit",className:"button-submit"},"Search"),r.a.createElement("button",{onClick:e.closeDrawer,type:"button",className:"button-cancel margin-right"},"Cancel"))),r.a.createElement("div",{className:"vertical-padding"}),p?r.a.createElement("div",{className:"text-centered"},r.a.createElement(ve,{movie:p,closeDrawer:e.closeDrawer})):r.a.createElement("div",{className:"grid text-centered"},c.map((function(e){return r.a.createElement("img",{className:"half-col hover-scale",src:e.Poster,alt:e.Title,onClick:function(){return function(e){f(e)}(e)},key:"search-poster-".concat(e.Title)})})))))},ge=(a(475),a(476),a(477),a(34)),be=Object(pe.b)((function(e){return{username:e.user.username,friend_requests:e.user.friend_requests}}))((function(e){var t=e.username,a=e.friend_requests,n=r.a.useState(!1),l=Object(u.a)(n,2),i=l[0],s=l[1],b=r.a.useState(null),N=Object(u.a)(b,2),w=N[0],S=N[1],O=function(){S(null)},j=function(){s(!0)},D=function(){s(!1)},T="/"===Object(c.g)().pathname,A=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{to:"/movies",className:"header-link",activeClassName:"active"},"MOVIES"),r.a.createElement(o.c,{to:"/stats",className:"header-link",activeClassName:"active"},"STATS"),r.a.createElement(o.c,{to:"/explore",className:"header-link",activeClassName:"active"},"EXPLORE"),r.a.createElement(o.c,{to:"/profile",className:"header-link",activeClassName:"active"},"PROFILE"),a.length>0&&r.a.createElement("span",{className:"alert"},a.length),r.a.createElement(p.a,{title:"Add Movie","aria-label":"add_movie",id:"add_movie"},r.a.createElement("button",{className:T?"header-link header-button-landing":"header-link header-button","aria-labelledby":"add_movie",onClick:j},"+"))),M=r.a.createElement(r.a.Fragment,null,r.a.createElement(o.c,{to:"/explore",className:"header-link",activeClassName:"active"},"EXPLORE"),r.a.createElement(o.c,{to:"/login",className:"header-link",activeClassName:"active"},"LOGIN")),R=[r.a.createElement(g.a,{className:"nav-item",key:"explore-link"},r.a.createElement(o.c,{onClick:O,to:"/explore",className:"nav-link"},r.a.createElement(k.a,{className:"landing-icon pink"})," Explore")),r.a.createElement(g.a,{className:"nav-item",key:"login-link"},r.a.createElement(o.c,{onClick:O,to:"/login",className:"nav-link"},r.a.createElement(_.a,{className:"landing-icon pink"})," Login"))],B=[r.a.createElement(g.a,{className:"nav-item",key:"movie-link"},r.a.createElement(o.c,{onClick:O,to:"/movies",className:"nav-link"},r.a.createElement(y.a,{className:"landing-icon pink"})," Movies")),r.a.createElement(g.a,{className:"nav-item",key:"explore-link"},r.a.createElement(o.c,{onClick:O,to:"/explore",className:"nav-link"},r.a.createElement(k.a,{className:"landing-icon pink"})," Explore")),r.a.createElement(g.a,{className:"nav-item",key:"stats-link"},r.a.createElement(o.c,{onClick:O,to:"/stats",className:"nav-link"},r.a.createElement(x.a,{className:"landing-icon pink"})," Stats")),r.a.createElement(g.a,{className:"nav-item",key:"profile-link"},r.a.createElement(o.c,{onClick:O,to:"/profile",className:"nav-link"},r.a.createElement(_.a,{className:"landing-icon pink"})," Profile"))];return r.a.createElement("nav",null,r.a.createElement(m.a,{position:"static"},r.a.createElement(d.a,{className:T?"navbar-landing":"navbar"},r.a.createElement("h1",{id:"logo"},"INTAKE"),r.a.createElement(ge.BrowserView,null,r.a.createElement(o.c,{exact:!0,to:"/",className:"header-link",activeClassName:"active"},"ABOUT"),t?A:M),r.a.createElement(ge.MobileView,null,t&&r.a.createElement("button",{className:T?"header-link header-button-landing":"header-link header-button","aria-labelledby":"add_movie",onClick:j},"+"),r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"see navigation menu","aria-controls":"phone-menu","aria-haspopup":"true",onClick:function(e){return S(e.currentTarget)}},r.a.createElement(C.a,{fontSize:"large"})),r.a.createElement(E.a,{id:"phone-menu",anchorEl:w,keepMounted:!0,open:Boolean(w),onClose:O},r.a.createElement(g.a,{className:"nav-item"},r.a.createElement(o.c,{onClick:O,to:"/",className:"nav-link"},r.a.createElement(h.a,{className:"landing-icon pink"})," About")),t?B:R)))),r.a.createElement(v.a,{className:"drawer",open:i,anchor:"right",onClose:D},r.a.createElement(Ee,{closeDrawer:D})))})),he=(a(122),a(479),a(330)),Ne=a.n(he),ye=a(31),we=a.n(ye),ke=Object(pe.b)((function(e){return{movies:e.movies.movies}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t=r.a.useState([]),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(!1),c=Object(u.a)(i,2),s=c[0],m=c[1],d=r.a.useState("Title"),p=Object(u.a)(d,2),f=p[0],E=p[1];r.a.useEffect((function(){if(e.movies)switch(f){case"Date Viewed":l(Object(F.a)(e.movies).sort((function(e,t){var a=new Date(e.date_added.date).getTime(),n=new Date(t.date_added.date).getTime();return n>a||n===a&&t.title>e.title?-1:1})));break;case"Rating":l(Object(F.a)(e.movies).sort((function(e,t){return t.total_rating>e.total_rating?1:t.total_rating===e.total_rating?t.title>e.title?-1:1:-1})));break;case"Title":l(Object(F.a)(e.movies).sort((function(e,t){return e.title>t.title?1:-1})))}}),[f]);var g=function(){return m(!1)},b=r.a.createElement("div",{className:"Movies margin-top noMovies"},r.a.createElement("button",{type:"button",id:"big-add-button","aria-labelledby":"big-add-button-label",className:"margin-top",onClick:function(){return m(!0)}},"+"),r.a.createElement("h1",{id:"big-add-button-label",className:"text-centered margin-top","aria-label":"Add Movie"},"Add Movie"),r.a.createElement(v.a,{className:"drawer",open:s,anchor:"right",onClose:g},r.a.createElement(Ee,{closeDrawer:g}))),h=r.a.createElement("div",{className:"Movies-main margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Your movies | INTAKE"),r.a.createElement("meta",{name:"description",content:"See all of the movies you've entered into your Intake. Sort them by their rating, the date you watched them, or their title. Click a movie for more information."})),ge.isMobile&&r.a.createElement("h1",{id:"all-movies"},"All Movies"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},id:"movie-select"},r.a.createElement("select",{"aria-label":"select filter",value:f,onChange:function(e){return E(e.target.value)},className:"float-right margin-top"},r.a.createElement("option",{value:"Title"},"Title"),r.a.createElement("option",{value:"Date Viewed"},"Date Viewed"),r.a.createElement("option",{value:"Rating"},"Rating"))),ge.isBrowser&&r.a.createElement("h1",{id:"all-movies"},"All Movies"),r.a.createElement("div",{className:"posters-container"},n&&n.map((function(e){return r.a.createElement("div",{className:"poster-wrapper",key:e._id},r.a.createElement(Ne.a,{height:500/1.75,offset:200,once:!0,key:e.title},r.a.createElement(o.b,{to:"/movies/".concat(e._id)},r.a.createElement("img",{src:e.poster.substring(0,e.poster.length-7)+"300.jpg",className:"poster-medium hover-scale",alt:e.title,"aria-label":"".concat(e.title," | ").concat(e.total_rating,"/20")}),r.a.createElement("div",{className:"hoverText"},r.a.createElement("p",null,e.total_rating," ",r.a.createElement("br",null)," ",r.a.createElement("span",{className:"overlined"},"20"))))),ge.isMobile&&r.a.createElement("p",null,e.total_rating," / 20"))}))));return e.movies&&e.movies.length>0?h:b})),Se=a(351),xe=(a(313),a(697)),Oe=a(686),_e=a(350),je=function(e){var t=r.a.useState([]),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(5),o=Object(u.a)(i,2),c=o[0],s=o[1],m=r.a.useState(Ie[Math.floor(Math.random()*Ie.length)]),d=Object(u.a)(m,1)[0],p=Object(_e.a)({overrides:{MuiSlider:{thumb:{color:"white"},track:{color:"#EF4AB5"},rail:{color:"#000",opacity:1},valueLabel:{color:"#171e22"},mark:{opacity:0},markActive:{opacity:0}}}});r.a.useEffect((function(){var t=Object(F.a)(e.data).splice(0,c),a=t.map((function(e){return e.count})),n=0;a.length>0&&(n=a.reduce((function(e,t){return e+t})));var r=Object(F.a)(e.data).splice(c,e.data.length);if(r.length>0){var i=r.map((function(e){return e.count})).reduce((function(e,t){return e+t}));l(Ue(t.concat([{key:"Others",count:i,color:"#79858b"}]),n+i,d))}else l(Ue(Object(F.a)(e.data).splice(0,c),n,d))}),[e.data,c]);var f=5;return r.a.createElement("div",{className:"graph-container margin-top"},r.a.createElement("h2",null,e.titleExtension?e.title+e.titleExtension:e.title),"Average Rating"!==e.title&&r.a.createElement(Oe.a,{theme:p},r.a.createElement(xe.a,{defaultValue:5,getAriaValueText:function(t){return"".concat(t," ").concat(e.title.toLowerCase())},"aria-label":"number of values to show",valueLabelDisplay:"auto",step:1,marks:!0,min:0,max:e.data.length,className:"slider",style:{width:"150px"},value:c,onChange:function(e,t){return function(e){e!=f&&(s(e),f=e)}(t)}})),r.a.createElement(Se.a,{data:n,margin:{top:40,right:80,bottom:80,left:80},innerRadius:.25,padAngle:4,cornerRadius:2,colors:function(e){return e.color},radialLabelsSkipAngle:0,radialLabelsTextXOffset:6,radialLabelsTextColor:"#eee",radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:14,radialLabelsLinkHorizontalLength:18,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},slicesLabelsSkipAngle:10,slicesLabelsTextColor:"#000",tooltip:function(e){return r.a.createElement("p",{className:"tooltip inline-flex"},r.a.createElement("span",{className:"color-indicator",style:{backgroundColor:e.color}}),e.label,": ",e.value," (",e.percentage,"%)")}}))},Ce=a(89),De=a(183),Te=a(340),Ae=a(58),Me=a.n(Ae),Re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Be=function(e){var t=r.a.useState(null),a=Object(u.a)(t,2),n=a[0],l=(a[1],r.a.useState(Me()(Date.now()).format("YYYY MMM"))),i=Object(u.a)(l,2),o=i[0],c=(i[1],r.a.useState([])),s=Object(u.a)(c,2),m=s[0],d=s[1],p=r.a.useState([]),f=Object(u.a)(p,2),v=f[0],E=f[1];r.a.useEffect((function(){var t,a=function(e){var t={};return e.forEach((function(e){var a=Me()(e),n=a.year(),r=a.format("MMM");t[n]||(t[n]={}),t[n][r]?t[n][r].push(e):t[n][r]=[e]})),t}(e.dates),n={id:"test",color:"#fff",data:[]},r=Object(Ce.a)(Re);try{for(r.s();!(t=r.n()).done;){var l=t.value;a[2020]&&a[2020][l]?n.data.push({x:l,y:a[2020][l].length}):n.data.push({x:l,y:0})}}catch(s){r.e(s)}finally{r.f()}d([n]);var i={};e.dates.forEach((function(e){var t=Me()(e).format("YYYY-MM-DD");i[t]?i[t].value++:i[t]={day:t,value:1}}));var o=[];for(var c in i)o.push(i[c]);E(o)}),[e.dates,n,o]);return r.a.createElement("div",{className:"viewing-container"},r.a.createElement("div",{className:"graph-container-large margin-top"},r.a.createElement("h2",null,"Viewing Timeline"),r.a.createElement(De.a,{data:m,margin:{top:50,right:110,bottom:50,left:60},tooltip:function(e){return r.a.createElement("p",{className:"tooltip-line inline-flex"},r.a.createElement("span",{className:"color-indicator",style:{backgroundColor:e.point.borderColor}}),e.point.data.x," : ",e.point.data.y," movie",1!==e.point.data.y&&"s"," seen")},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},curve:"monotoneX",axisTop:null,axisRight:null,theme:{grid:{line:{stroke:"#000"}},axis:{legend:{text:{fill:"#EF4AB5",fontSize:16},color:"#eee",itemTextColor:"#eee",fill:"#eee"},ticks:{text:{fill:"#eee",fontSize:12},line:{stroke:"#eee",strokeWidth:1},textColor:"#eee",itemTextColor:"#eee"},domain:{line:{stroke:"#eee",strokeWidth:1}}},crosshair:{line:{stroke:"#eee",strokeWidth:1,strokeOpacity:.33}}},axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,legend:"Movies",legendOffset:-40,legendPosition:"middle"},colors:function(){return"#EF4AB5"},lineWidth:3,pointSize:5,pointColor:{theme:"background"},pointBorderWidth:5,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-15,areaOpacity:0,useMesh:!0,enableGridX:!1,enableGridY:!1})),r.a.createElement("div",{className:"graph-container-large margin-top-xx",id:"calendar-container"},r.a.createElement(Te.a,{data:v,from:"2020-02-01",to:"2020-08-01",emptyColor:"#171e22",colors:["#F2BF6C","#F69A97","#FB76C1","#EF4AB5"],margin:{top:50,right:40,bottom:40,left:40},yearSpacing:40,monthBorderColor:"#1E262A",dayBorderWidth:2,dayBorderColor:"#1E262A",minValue:1,maxValue:4,legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left",textColor:"#eee",itemTextColor:"#eee",symbolBorderColor:"#eee"}],tooltip:function(e){return r.a.createElement("p",{className:"tooltip inline-flex"},r.a.createElement("span",{className:"color-indicator",style:{backgroundColor:e.color}}),Me()(e.data.day).format("MMM DD, YYYY"),": ",e.value," movie",1!==e.value&&"s"," seen")}})))},Fe=function(e){var t=r.a.useState([]),a=Object(u.a)(t,2),n=a[0],l=a[1];r.a.useEffect((function(){if(e.dates.length>0){for(var t={},a=parseInt(e.dates.reduce((function(e,t){return t<e?t:e}))),n=(new Date).getFullYear(),r=0;r<=Math.ceil(n/10)-Math.floor(a/10);r++)t[(a+10*r).toString().substring(0,3)]=0;e.dates.forEach((function(e){return t[e.substring(0,3)]++}));var i=[];for(var o in t)i.push({x:"".concat(o,"0s"),y:t[o]});l([{id:"releaseTimeline",color:"#fff",data:i}])}}),[e.dates]);return r.a.createElement("div",{className:"graph-container-large margin-top"},r.a.createElement("h2",null,"Release Timeline"),r.a.createElement(De.a,{data:n,margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},curve:"monotoneX",axisTop:null,axisRight:null,theme:{grid:{line:{stroke:"#000"}},axis:{legend:{text:{fill:"#96ddc2",fontSize:16}},ticks:{text:{fill:"#eee",fontSize:12},line:{stroke:"#eee",strokeWidth:1}},domain:{line:{stroke:"#eee",strokeWidth:1}}},crosshair:{line:{stroke:"#eee",strokeWidth:1,strokeOpacity:.33}}},axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"decade",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,tickValues:5,legend:"movies",legendOffset:-40,legendPosition:"middle"},colors:function(){return"#96ddc2"},lineWidth:3,pointSize:5,pointColor:{theme:"background"},pointBorderWidth:5,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-15,areaOpacity:0,useMesh:!0,enableGridX:!1,enableGridY:!1,tooltip:function(e){return r.a.createElement("p",{className:"tooltip-line inline-flex"},r.a.createElement("span",{className:"color-indicator",style:{backgroundColor:e.point.borderColor}}),e.point.data.x," : ",e.point.data.y," movie",1!==e.point.data.y&&"s"," seen")}}))},Le=(a(616),function(e){return r.a.createElement("ul",{className:"breadcrumbs"},e.crumbs.map((function(e){return e.href?r.a.createElement(r.a.Fragment,{key:e.name},r.a.createElement("li",null,r.a.createElement(o.c,{to:e.href,className:"crumb-link"},e.name)),r.a.createElement("li",null,"/")):r.a.createElement("li",null,r.a.createElement("p",{className:"crumb",key:e.name},e.name))})))}),Ie=[["#FCF2D5","#F7CAC1","#F2A2AD","#ED7A99","#E85285"],["#538DEC","#70A8ED","#8DC3EF","#A9DEF0","#C6F9F1"],["#EAFFF7","#C8F3E5","#A5E7D2","#83DBC0","#60CFAD"],["#F9E3F1","#F6C0E3","#F49ED6","#F17BC8","#EE58BA"],["#F6BD60","#F7EDE2","#F5CAC3","#84A59D","#F28482"],["#ff9f1c","#ffbf69","#ffffff","#cbf3f0","#2ec4b6"],["#d4e09b","#f6f4d2","#cbdfbd","#f19c79","#e6867a"],["#7bdff2","#b2f7ef","#eff7f6","#f7d6e0","#f2b5d4"]],Ue=function(e,t,a){return e.map((function(e,n){return{id:e.key,label:e.key,value:e.count,color:e.color?e.color:a[n%a.length],percentage:(e.count/t*100).toLocaleString("fullwide",{maximumFractionDigits:2})}}))},Pe=function(e){var t=[];for(var a in e)t.push({key:a,count:e[a]});return t.sort((function(e,t){return t.count-e.count})),t},Ye=["Genres","Themes","Directors","Runtimes","Writers","Content Ratings"],Ve={genres:"Genres",themes:"Themes",ratings:"Ratings",director:"Directors",writer:"Writers",rated:"Content Ratings",runtime:"Runtimes",year:"Years"},We=Object(pe.b)((function(e){return{movies:e.movies.movies,genres:e.stats.genres,contentRatings:e.stats.contentRatings,datesAdded:e.stats.datesAdded,releaseDates:e.stats.releaseDates,themes:e.stats.themes,ratings:e.stats.ratings}}),(function(e){return Object(s.b)({loadMovies:de,setGenres:Z,setThemes:te,setDatesAdded:Q,setReleaseDates:ee,setRatings:ae,setContentRatings:$},e)}))((function(e){var t=Object(c.h)(),a=t.property,n=t.value,l=r.a.useState(null),i=Object(u.a)(l,2),s=i[0],m=i[1],d=r.a.useState([]),p=Object(u.a)(d,2),f=p[0],v=p[1],E=r.a.useState({total:0,others:[]}),g=Object(u.a)(E,2),b=g[0],h=g[1],N=r.a.useState([]),y=Object(u.a)(N,2),w=y[0],k=y[1],S=r.a.useState([]),x=Object(u.a)(S,2),O=x[0],_=x[1],j=r.a.useState([]),C=Object(u.a)(j,2),D=C[0],T=C[1],A=r.a.useState([]),M=Object(u.a)(A,2),R=M[0],B=M[1];r.a.useEffect((function(){e.movies&&m(a&&n?e.movies.filter((function(e){var t=e[a];return Array.isArray(t)?t.includes(n):t===n})):e.movies)}),[e.movies,n]);var F=function(){var e={},t=0,a=0,n=0,r=0,l=0,i=null===s||void 0===s?void 0:s.length,o=[],c=[],u={},m={};null===s||void 0===s||s.forEach((function(i){i.themes.forEach((function(t){return e[t]?e[t]++:e[t]=1})),i.genres.forEach((function(e){return u[e]?u[e]++:u[e]=1})),t+=i.entertainment_rating,a+=i.plot_rating,n+=i.style_rating,r+=i.bias_rating,l+=i.total_rating,m[i.rated]?m[i.rated]++:m[i.rated]=1,o.push(i.date_added.date),c.push(i.year)}));var d=Pe(e);v(d),i&&(t/=i,a/=i,n/=i,r/=i,l/=i);var p={total:Number(l.toLocaleString("fullwide",{maximumFractionDigits:2})),others:[{key:"Entertainment",count:Number(t.toLocaleString("fullwide",{maximumFractionDigits:2}))},{key:"Writing",count:Number(a.toLocaleString("fullwide",{maximumFractionDigits:2}))},{key:"Style",count:Number(n.toLocaleString("fullwide",{maximumFractionDigits:2}))},{key:"Bias",count:Number(r.toLocaleString("fullwide",{maximumFractionDigits:2}))}]};h(p);var f=Pe(u);k(f);var E=Pe(m);return _(E),T(o),B(c),{genres:f,contentRatings:E,datesAdded:o,releaseDates:c,themes:d,ratings:p}};r.a.useEffect((function(){if(s)if(a||n)F();else if(e.genres||e.contentRatings||e.datesAdded||e.ratings||e.releaseDates||e.themes)k(e.genres),_(e.contentRatings),T(e.datesAdded),B(e.releaseDates),v(e.themes),h(e.ratings);else{var t=F();e.setGenres(t.genres),e.setDatesAdded(t.datesAdded),e.setContentRatings(t.contentRatings),e.setReleaseDates(t.releaseDates),e.setThemes(t.themes),e.setRatings(t.ratings)}}),[s]);var L=Ve[a],I=[{name:"Stats",href:"/stats"},{name:L,href:"/stats/".concat(L)},{name:n}];return r.a.createElement("div",{className:"Stats text-centered margin-top"},a?r.a.createElement(we.a,null,r.a.createElement("title",null,"Your personal ",n," movie statistics | INTAKE"),r.a.createElement("meta",{name:"description",content:"View statistics for all the movies you've seen with the ".concat(Ve[a].substring(0,Ve[a].length-1)," ").concat(n,". See the average rating, the most common themes, genres, and content ratings, and content timelines.")})):r.a.createElement(we.a,null,r.a.createElement("title",null,"Your personal movie statistics | INTAKE"),r.a.createElement("meta",{name:"description",content:"View statistics for all the movies you've submitted to your Intake feed. See the average rating, the most common themes, genres, and content ratings, and content timelines."})),a&&r.a.createElement(Le,{crumbs:I}),r.a.createElement("h1",null,a?"".concat(L.substring(0,L.length-1),": ").concat(n):"All Movies"),0===(null===s||void 0===s?void 0:s.length)?r.a.createElement("p",{className:"grey italics"},"You don't have any movies that can be used to collect these statistics."," ",r.a.createElement(o.c,{to:"/movies",className:"green link"},"Add More")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"green italics"},"Movies Seen: ",null===s||void 0===s?void 0:s.length),r.a.createElement("div",{className:"two-col-grid"},r.a.createElement(je,{data:f,title:"Themes"}),r.a.createElement(je,{data:b.others,title:"Average Rating",titleExtension:": ".concat(b.total)}),r.a.createElement(je,{data:w,title:"Genres"}),r.a.createElement(je,{data:O,title:"Content Ratings"})),r.a.createElement(ge.BrowserView,null,r.a.createElement(Be,{dates:D}),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement(Fe,{dates:R}),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("div",{className:"vertical-padding"})),!a&&r.a.createElement("div",{className:"margin-top"},r.a.createElement("h1",null,"Other Stats"),r.a.createElement("div",{className:"other-stats"},Ye.map((function(e){return r.a.createElement(o.c,{to:"/stats/".concat(e),className:"stat-link",key:e},r.a.createElement("p",null,e))}))))))})),He=Object(pe.b)((function(e){return{movies:e.movies.movies}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t=r.a.useState(e.entertainment_rating.toString()),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(e.plot_rating.toString()),o=Object(u.a)(i,2),c=o[0],s=o[1],m=r.a.useState(e.style_rating.toString()),d=Object(u.a)(m,2),p=d[0],f=d[1],v=r.a.useState(e.bias_rating.toString()),E=Object(u.a)(v,2),g=E[0],b=E[1],h=r.a.useState(e.themes),N=Object(u.a)(h,2),y=N[0],w=N[1],k=[{title:"Entertainment",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);l(t<=5?e.target.value:n)}else l("")},value:n},{title:"Writing",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);s(t<=5?e.target.value:c)}else s("")},value:c},{title:"Style",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);f(t<=5?e.target.value:p)}else f("")},value:p},{title:"Bias",changeHandler:function(e){if(e.target.value){var t=parseInt(e.target.value);b(t<=5?e.target.value:g)}else b("")},value:g}],S=function(){var t=Object(A.a)(T.a.mark((function t(a){var r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,fetch("/api/movies/".concat(e.id),{method:"post",body:JSON.stringify({id:e.id,entertainment_rating:parseInt(n),plot_rating:parseInt(c),style_rating:parseInt(p),bias_rating:parseInt(g),themes:y}),headers:{"Content-Type":"application/json"}});case 3:r=t.sent,t.t0=r.status,t.next=200===t.t0?7:401===t.t0?10:12;break;case 7:return e.loadMovies(),e.closeDrawer(),t.abrupt("break",13);case 10:return console.log("error saving"),t.abrupt("break",13);case 12:console.log("unkown error");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"drawer-content"},r.a.createElement("div",{className:"drawer-header"},r.a.createElement("h2",{id:"movieEditLabel"},"Edit Ratings"),r.a.createElement("hr",null),r.a.createElement("div",{className:"vertical-padding"})),r.a.createElement("div",{className:"drawer-body text-centered"},r.a.createElement("img",{src:e.movie.poster,alt:e.movie.title,className:"poster"}),r.a.createElement("h2",null,e.movie.title),r.a.createElement("form",{autoComplete:"off",onSubmit:S},k.map((function(e,t){return r.a.createElement("div",{key:e.title,className:"row margin-top"},r.a.createElement("label",{id:"".concat(e.title,"Label"),className:"green col text-right"},e.title,":"),r.a.createElement("div",{className:"col text-left"},r.a.createElement("input",{type:"string",className:"small-input","aria-labelledby":"".concat(e.title,"Label"),value:e.value,onChange:e.changeHandler})," ",r.a.createElement("span",{className:"grey"},"/ 5")))})),y.map((function(e,t){return r.a.createElement("div",{key:"theme-".concat(t),className:"fade-in"},r.a.createElement("input",{type:"string",placeholder:"theme",className:"margin-top",value:e,onChange:function(e){return function(e,t){var a=Object(F.a)(y);a[e]=t.target.value,w(a)}(t,e)}}),r.a.createElement("button",{className:"button-escape margin-top","aria-label":"delete theme",onClick:function(){return function(e){var t=Object(F.a)(y);t.splice(e,1),w(t)}(t)}},"\xd7"))})),r.a.createElement("button",{type:"button",className:"button-submit margin-top",onClick:function(e){w((function(e){return[].concat(Object(F.a)(e),[""])}))}},"+ Add Theme"),r.a.createElement("div",{className:"inline-flex full-width row-reverse margin-top"},r.a.createElement("button",{type:"submit",className:"button-submit"},"Submit"),r.a.createElement("button",{onClick:e.closeDrawer,type:"button",className:"button-cancel margin-right"},"Cancel")),r.a.createElement("div",{className:"vertical-padding"}))))})),Ge=a(687),qe=a(691),ze=a(689),Je=a(690),Ke=a(688),Xe=Object(pe.b)((function(e){return{movies:e.movies.movies}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t=function(){var t=Object(A.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/movies/".concat(e.id),{method:"delete"});case 2:a=t.sent,t.t0=a.status,t.next=200===t.t0?6:401===t.t0?9:11;break;case 6:return e.loadMovies(),e.closeDialog(),t.abrupt("break",12);case 9:return console.log("error"),t.abrupt("break",12);case 11:console.log("unknown error");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(Ge.a,{open:e.open,onClose:e.closeDialog,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",className:"dialog"},r.a.createElement(Ke.a,{id:"dialog-title"},"Delete Movie?"),r.a.createElement(ze.a,null,r.a.createElement(Je.a,{id:"dialog-description"},"Deleting this movie from your Intake will result in all of your inputted data (including ratings, themes, and reviews) being permanently removed from our database.")),r.a.createElement(qe.a,null,r.a.createElement("button",{onClick:e.closeDialog,className:"button-cancel"},"Cancel"),r.a.createElement("button",{type:"submit",onClick:t,className:"button-submit"},"Delete")))})),Ze=a(184),$e=a.n(Ze),Qe=a(343),et=a.n(Qe),tt=a(250),at=a.n(tt),nt=function(e){return r.a.createElement(Ge.a,{open:e.open,onClose:e.closeDialog,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",className:"dialog"},r.a.createElement(Ke.a,{id:"dialog-title"},"Delete Review?"),r.a.createElement(ze.a,null,r.a.createElement(Je.a,{id:"dialog-description"},"Deleting this review will result in it being permanently removed from our servers.")),r.a.createElement(qe.a,null,r.a.createElement("button",{onClick:e.closeDialog,className:"button-cancel"},"Cancel"),r.a.createElement("button",{type:"submit",onClick:e.handleSubmit,className:"button-submit"},"Delete")))},rt=Object(pe.b)((function(e){return{movies:e.movies.movies,_id:e.user._id,upvoted_reviews:e.user.upvoted_reviews,username:e.user.username}}),(function(e){return Object(s.b)({loadMovies:de},e)}))((function(e){var t,a=Object(c.h)().id,n=r.a.useState(!0),l=Object(u.a)(n,2),i=l[0],s=l[1],m=r.a.useState(""),d=Object(u.a)(m,2),f=d[0],b=d[1],h=r.a.useState(null),N=Object(u.a)(h,2),y=N[0],w=N[1],k=r.a.useState(!1),S=Object(u.a)(k,2),x=S[0],O=S[1],_=r.a.useState(!1),j=Object(u.a)(_,2),C=j[0],D=j[1],M=r.a.useState(!1),R=Object(u.a)(M,2),B=R[0],F=R[1],L=r.a.useState(!1),I=Object(u.a)(L,2),U=I[0],P=I[1],V=r.a.useState(null),W=Object(u.a)(V,2),H=W[0],G=W[1],q=null===(t=e.movies)||void 0===t?void 0:t.find((function(e){return e._id===a}));if(!q)return r.a.createElement(c.a,{to:"/movies"});var z=new Array(5).fill(!1).fill(!0,0,null===q||void 0===q?void 0:q.entertainment_rating),J=new Array(5).fill(!1).fill(!0,0,null===q||void 0===q?void 0:q.plot_rating),K=new Array(5).fill(!1).fill(!0,0,null===q||void 0===q?void 0:q.style_rating),X=new Array(5).fill(!1).fill(!0,0,null===q||void 0===q?void 0:q.bias_rating),Z=[{title:"Entertainment",source:z,value:q.entertainment_rating},{title:"Writing",source:J,value:q.plot_rating},{title:"Style",source:K,value:q.style_rating},{title:"Bias",source:X,value:q.bias_rating}],$=function(){var t=Object(A.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/api/movies/".concat(a,"/review"),{method:"post",body:JSON.stringify({review:f}),headers:{"Content-Type":"application/json"}});case 3:200===t.sent.status?(console.log("success"),s(!0),e.loadMovies()):console.log("failure");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(A.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/api/movies/".concat(a,"/edit_review/").concat(null===H||void 0===H?void 0:H._id),{method:"post",body:JSON.stringify({review:f}),headers:{"Content-Type":"application/json"}});case 3:200===t.sent.status?(P(!1),s(!0),e.loadMovies()):console.log("failure");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){return w(null)},te=function(){return O(!1)},ae=function(){var t=Object(A.a)(T.a.mark((function t(n,r){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/movies/".concat(a,"/review/").concat(n._id),{method:"post",body:JSON.stringify({vote:r}),headers:{"Content-Type":"application/json"}});case 2:200===t.sent.status?e.loadMovies():console.log("error");case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ne=function(){var t=Object(A.a)(T.a.mark((function t(n){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/movies/".concat(a,"/review/").concat(n._id),{method:"delete"});case 2:200===t.sent.status?e.loadMovies():console.log("error");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return q.reviews=q.reviews.sort((function(e,t){return t.upvotes-e.upvotes})),r.a.createElement("div",{className:"Movies"},r.a.createElement(we.a,null,r.a.createElement("title",null," Your ratings for ",q.title," | INTAKE"),r.a.createElement("meta",{name:"description",content:"See your inputted ratings for ".concat(q.title," as well as who directed it, who wrote it, its genres, themes, and more. See other user's opinion of ").concat(q.title,", and write your own review.")})),r.a.createElement(p.a,{title:"Options","aria-label":"options"},r.a.createElement("button",{type:"button",id:"options",className:"float-right margin-top-xx button-icon","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){w(e.currentTarget)}},r.a.createElement($e.a,null))),r.a.createElement(E.a,{id:"simple-menu",anchorEl:y,keepMounted:!0,open:Boolean(y),onClose:ee},r.a.createElement(g.a,{onClick:function(){ee(),O(!0)}},"Edit"),r.a.createElement(g.a,{onClick:function(){ee(),D(!0)}},"Delete")),r.a.createElement(v.a,{className:"drawer",open:x,anchor:"right",onClose:te},r.a.createElement(He,{movie:q,entertainment_rating:q.entertainment_rating,plot_rating:q.plot_rating,style_rating:q.style_rating,bias_rating:q.bias_rating,themes:q.themes,closeDrawer:te,id:a})),r.a.createElement(Xe,{open:C,closeDialog:function(){return D(!1)},id:a}),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"poster-large-container"},r.a.createElement("img",{src:q.poster,className:"poster-large margin-top",alt:q.title})),r.a.createElement("div",{className:ge.isMobile?"col":"col margin-left-x"},r.a.createElement("h1",{className:ge.isMobile?"text-centered":""},q.title),r.a.createElement("div",{className:"two-col-grid"},r.a.createElement("div",{className:ge.isMobile?"feed-grid":"two-col-grid"},Z.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.title},r.a.createElement("p",{className:"green"},e.title,": "),r.a.createElement("div",{className:"margin-top-x no-padding"},e.source.map((function(t,a){return r.a.createElement("div",{className:t?"rating-dot active":"rating-dot",key:"".concat(e.title,"_").concat(a)})}))))})),r.a.createElement("p",{className:"green"},"Total Rating: "),r.a.createElement("p",null,q.total_rating,"/20"),r.a.createElement("p",{className:"green"},"Date Viewed:"),r.a.createElement("p",null,Me()(q.date_added.date).format("MM-DD-YYYY"))),r.a.createElement("div",{className:ge.isMobile?"feed-grid-one-col":""},r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Director: "),q.director.map((function(e,t){return r.a.createElement(p.a,{title:"See stats for director: ".concat(e),"aria-label":"Link to see stats for director: ".concat(e),key:"".concat(e,"-director-link")},r.a.createElement(o.b,{to:"/stats/director/".concat(e),className:"link white button-icon"},0===t?e:", ".concat(e)))}))),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Writer: "),q.writer.map((function(e,t){return r.a.createElement(p.a,{title:"See stats for writer: ".concat(e),"aria-label":"Link to see stats for writer: ".concat(e),key:"".concat(e,"-writer-link")},r.a.createElement(o.b,{to:"/stats/writer/".concat(e),className:"link white button-icon"},0===t?e:", ".concat(e)))}))),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Genres: "),q.genres.map((function(e,t){return r.a.createElement(p.a,{title:"See stats for genre: ".concat(e),"aria-label":"Link to see stats for genre: ".concat(e),key:"".concat(e,"-genre-link")},r.a.createElement(o.b,{to:"/stats/genres/".concat(e),className:"link white button-icon"},0===t?e:", ".concat(e)))}))),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Year Released: "),r.a.createElement(p.a,{title:"See stats for movies released in ".concat(q.year),"aria-label":"See stats for movies released in ".concat(q.year)},r.a.createElement(o.b,{to:"/stats/year/".concat(q.year),className:"link white button-icon"},q.year))),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Rated: ")," ",r.a.createElement(p.a,{title:"See stats for movies with a ".concat(q.rated," content rating."),"aria-label":"See stats for movies with a ".concat(q.rated," content rating.}")},r.a.createElement(o.b,{to:"/stats/rated/".concat(q.rated),className:"link white"},q.rated))),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Runtime: ")," ",q.runtime),r.a.createElement("p",null,r.a.createElement("span",{className:"green"},"Themes: "),q.themes.map((function(e,t){return r.a.createElement(p.a,{title:"See stats for theme: ".concat(e),"aria-label":"Link to see stats for theme: ".concat(e),key:"".concat(e,"-theme-link")},r.a.createElement(o.b,{to:"/stats/themes/".concat(e),className:"link white button-icon"},0===t?e:", ".concat(e)))}))))))),r.a.createElement("div",{className:"vertical-padding border-bottom"}),r.a.createElement("div",{className:"two-col-grid"},r.a.createElement("div",null,r.a.createElement("p",{className:"green"},"Premise: "),r.a.createElement("p",{className:"indented italics"},q.plot)),r.a.createElement("div",{className:"border-left"},r.a.createElement("div",{className:"margin-left margin-top"},r.a.createElement("h2",{className:"bold float-left no-margin-top"},"Reviews"),i?r.a.createElement("button",{type:"button",className:"button-submit float-right",onClick:function(){s(!1),P(!1)}},"Add a Review"):r.a.createElement("form",{autoComplete:"off",onSubmit:U?Q:$},r.a.createElement("textarea",{className:"full-width",placeholder:"Your review",onKeyDown:function(e){9===e.keyCode&&(e.preventDefault(),b((function(e){return e+"    "})))},value:f,onChange:function(e){return b(e.target.value)}}),r.a.createElement("div",{className:"inline-flex full-width row-reverse margin-top margin-left-s"},U?r.a.createElement("button",{type:"submit",className:"button-submit"},"Edit Review"):r.a.createElement("button",{type:"submit",className:"button-submit"},"Submit Review"),r.a.createElement("button",{type:"button",className:"button-cancel margin-right",onClick:function(){return s(!0)}},"Cancel"))),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("div",{className:"review-container"},q.reviews.map((function(t){return r.a.createElement("div",{className:"review",key:t._id},r.a.createElement("p",{className:"green"},t.username,":"," ",t.upvotes>0&&t.upvoted_by.includes(e._id)?r.a.createElement("button",{className:"button-upvote",onClick:function(){return ae(t,-1)}},r.a.createElement(at.a,{className:"upvote-selected",fontSize:"small"})):r.a.createElement("button",{className:"button-upvote",onClick:function(){return ae(t,1)}},r.a.createElement(at.a,{className:"upvote",fontSize:"small"})),r.a.createElement("span",{className:"white margin-left"},t.upvotes),t.username===e.username&&r.a.createElement("span",{className:"float-right inline-flex"},r.a.createElement(p.a,{title:"Edit Review"},r.a.createElement("button",{className:"button-review-icon",onClick:function(){return function(e){b(e.review),G(e),s(!1),P(!0)}(t)}},r.a.createElement(et.a,{fontSize:"small"}))),r.a.createElement(p.a,{title:"Delete Review"},r.a.createElement("button",{className:"button-review-icon",onClick:function(){return F(!0)}},r.a.createElement(Y.a,{fontSize:"small"}))),r.a.createElement(nt,{open:B,closeDialog:function(){return F(!1)},handleSubmit:function(){return ne(t)}}))),r.a.createElement("p",null,t.review))})))))),r.a.createElement("div",{className:"vertical-padding"}))})),lt=a(48),it=a.n(lt),ot=a(93),ct=a.n(ot),st=a(92),ut=a.n(st),mt=(a(164),a(617),Object(pe.b)((function(e){return{username:e.user.username}}),(function(e){return Object(s.b)({login:q,loadMovies:de},e)}))((function(e){var t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(""),c=Object(u.a)(i,2),s=c[0],m=c[1],d=r.a.useState(""),f=Object(u.a)(d,2),v=f[0],E=f[1],g=r.a.useState(!1),b=Object(u.a)(g,2),h=b[0],N=b[1],y=r.a.useState(!1),w=Object(u.a)(y,2),k=w[0],S=w[1],x=function(){var t=Object(A.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!s||!v){t.next=20;break}return t.next=4,fetch("/api/user/login",{method:"post",body:JSON.stringify({username:s,password:v}),headers:{"Content-Type":"application/json"}});case 4:n=t.sent,t.t0=n.status,t.next=200===t.t0?8:401===t.t0?14:19;break;case 8:return t.next=10,n.json();case 10:return r=t.sent,e.login(r),e.loadMovies(),t.abrupt("break",20);case 14:return t.next=16,n.json();case 16:return t.sent.error?S(!0):N(!0),t.abrupt("break",20);case 19:N(!0);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"Login text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Login to your Intake account | INTAKE"),r.a.createElement("meta",{name:"description",content:"Enter your username/email and password to gain access to your Intake account or register for a new account for free."})),r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("form",{onSubmit:x,className:"text-centered login-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(it.a,null),r.a.createElement("input",{type:"text",placeholder:"Username or email",className:h?"input-large-error margin-left":"input-large margin-left",value:s,onChange:function(e){m(e.target.value),N(!1)}})),r.a.createElement("div",{className:"margin-top"}),r.a.createElement("div",{className:"inline-flex margin-top row-reverse"},r.a.createElement("input",{"aria-label":"password",placeholder:"Password",className:h?"input-large-error margin-left":"input-large margin-left",type:n?"text":"password",value:v,onChange:function(e){E(e.target.value),N(!1)}}),n?r.a.createElement(p.a,{title:"Hide Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return l(!1)}},r.a.createElement(ut.a,null))):r.a.createElement(p.a,{title:"Show Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return l(!0)}},r.a.createElement(ct.a,null)))),h&&r.a.createElement("p",{className:"red"},"Invalid username / password combination"),k&&r.a.createElement("p",{className:"red"},"Please ",r.a.createElement(o.c,{to:"/verify",className:"link green"},"verify")," your Intake account."),r.a.createElement("div",{className:"full-width margin-top login-buttons"},r.a.createElement("button",{type:"button",className:"button-icon margin-right"},r.a.createElement(o.c,{to:"/createAccount",className:"green link"},"Create an account")),r.a.createElement("button",{type:"button",className:"button-icon margin-right","aria-label":"forgot password"},r.a.createElement(o.c,{to:"/resetPassword",className:"white link"},"Forgot Password")),r.a.createElement("button",{type:"submit",className:"button-submit"},"Login"))))}))),dt=a(344),pt=a.n(dt),ft={login:q},vt=Object(pe.b)((function(e){return{username:e.user.username}}),ft)((function(e){var t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(!1),c=Object(u.a)(i,2),s=c[0],m=c[1],d=r.a.useState(""),f=Object(u.a)(d,2),v=f[0],E=f[1],g=r.a.useState(""),b=Object(u.a)(g,2),h=b[0],N=b[1],y=r.a.useState(""),w=Object(u.a)(y,2),k=w[0],S=w[1],x=r.a.useState(""),O=Object(u.a)(x,2),_=O[0],j=O[1],C=r.a.useState(""),D=Object(u.a)(C,2),M=D[0],R=D[1],B=r.a.useState(!1),F=Object(u.a)(B,2),L=F[0],I=F[1],U=function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k===_){e.next=5;break}R("Passwords don't match"),e.next=24;break;case 5:if(!v||!k){e.next=23;break}return e.next=8,fetch("/api/user/register",{method:"post",body:JSON.stringify({email:h,username:v,password:k}),headers:{"Content-Type":"application/json"}});case 8:a=e.sent,e.t0=a.status,e.next=200===e.t0?12:17;break;case 12:return e.next=14,fetch("/api/user/sendVerificationToken",{method:"post",body:JSON.stringify({email:h}),headers:{"Content-Type":"application/json"}});case 14:return 200===e.sent.status?I(!0):R("Verification token could not be sent. Try again later."),e.abrupt("break",21);case 17:return e.next=19,a.json();case 19:n=e.sent,R(n.error);case 21:e.next=24;break;case 23:R("Please enter valid user data.");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.a.useEffect((function(){R("")}),[v,h,k]);return r.a.createElement("div",{className:"Login text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Create a new account for free. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Sign up for a new Intake account with a valid email, username, and password. Once registered, you'll be able to start adding movies to your Intake feed."})),r.a.createElement("h1",null,"Create Account"),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("form",{onSubmit:U,className:"text-centered login-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(it.a,null),r.a.createElement("input",{type:"text",placeholder:"Username",className:M?"input-large-error margin-left":"input-large margin-left",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"margin-top-x"}),r.a.createElement("div",{className:"inline-flex"},r.a.createElement(pt.a,null),r.a.createElement("input",{type:"text",placeholder:"Email",className:M?"input-large-error margin-left":"input-large margin-left",value:h,onChange:function(e){return N(e.target.value)}})),r.a.createElement("div",{className:"inline-flex margin-top-x row-reverse"},r.a.createElement("input",{"aria-label":"password",placeholder:"Password",className:M?"input-large-error margin-left":"input-large margin-left",type:n?"text":"password",value:k,onChange:function(e){S(e.target.value)}}),n?r.a.createElement(p.a,{title:"Hide Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return l(!1)}},r.a.createElement(ut.a,null))):r.a.createElement(p.a,{title:"Show Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return l(!0)}},r.a.createElement(ct.a,null)))),r.a.createElement("div",{className:"inline-flex margin-top-x row-reverse"},r.a.createElement("input",{"aria-label":"password",placeholder:"Comfirm Password",className:M?"input-large-error margin-left":"input-large margin-left",type:s?"text":"password",value:_,onChange:function(e){return j(e.target.value)}}),s?r.a.createElement(p.a,{title:"Hide Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return m(!1)}},r.a.createElement(ut.a,null))):r.a.createElement(p.a,{title:"Show Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":"hide password",onClick:function(){return m(!0)}},r.a.createElement(ct.a,null)))),M&&r.a.createElement("p",{className:"red"},M),L&&r.a.createElement("p",null,"A verification email has been sent to ",h,"."),r.a.createElement("div",{className:"full-width margin-top login-buttons"},r.a.createElement("button",{type:"button",className:"button-icon margin-right-x"},r.a.createElement(o.c,{to:"/login",className:"green link"},"Back to login")),r.a.createElement("span",null," "),r.a.createElement("button",{type:"submit",className:"button-submit float-right"},"Submit"))))})),Et={logout:z,setMovies:me},gt=Object(pe.b)((function(e){return{username:e.user.username}}),Et)((function(e){var t=function(){var t=Object(A.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/user/logout");case 2:a=t.sent,t.t0=a.status,t.next=200===t.t0?6:10;break;case 6:return e.closeDialog(),e.setMovies(null),e.logout(),t.abrupt("break",11);case 10:console.log("unknown error");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(Ge.a,{open:e.open,onClose:e.closeDialog,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",className:"dialog"},r.a.createElement(Ke.a,{id:"dialog-title"},"Log out of Intake?"),r.a.createElement(qe.a,null,r.a.createElement("button",{onClick:e.closeDialog,className:"button-cancel"},"Cancel"),r.a.createElement("button",{type:"submit",onClick:t,className:"button-submit"},"Logout")))})),bt={logout:z},ht=Object(pe.b)((function(e){return{username:e.user.username}}),bt)((function(e){var t=function(){var t=Object(A.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/user/delete",{method:"delete"});case 2:a=t.sent,t.t0=a.status,t.next=200===t.t0?6:9;break;case 6:return e.closeDialog(),e.logout(),t.abrupt("break",10);case 9:console.log("unknown error");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(Ge.a,{open:e.open,onClose:e.closeDialog,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",className:"dialog"},r.a.createElement(Ke.a,{id:"dialog-title"},"Delete your Intake account?"),r.a.createElement(ze.a,null,r.a.createElement(Je.a,{id:"dialog-description"},"Deleting your account will result in all of your entered movie data being permanently deleted from our database.")),r.a.createElement(qe.a,null,r.a.createElement("button",{onClick:e.closeDialog,className:"button-cancel"},"Cancel"),r.a.createElement("button",{type:"submit",onClick:t,className:"button-submit"},"Delete Account")))})),Nt=a(251),yt=a.n(Nt),wt={filter:"movies",search:"",currentUser:null,topUsersByFriends:null,topUsersByMovies:null,topUsersByReviews:null,topUsersByDateAddedOldest:null,topUsersByDateAddedNewest:null,searchResults:[],feed:null},kt=function(e){return H("explore/SET_FILTER",e)},St=function(e){return H("explore/SET_USER",e)},xt=function(){return function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/friends/feed");case 3:a=e.sent,e.t0=a.status,e.next=200===e.t0?7:11;break;case 7:return e.next=9,a.json();case 9:return n=e.sent,e.abrupt("return",t(H("explore/SET_FEED",n)));case 11:throw new Error("error fetching feed");case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(0),console.error(e.t1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},Ot=function(){var e=Object(A.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/friends/getTopUsers/".concat(t));case 2:a=e.sent,e.t0=a.status,e.next=200===e.t0?6:10;break;case 6:return e.next=8,a.json();case 8:return n=e.sent,e.abrupt("return",n);case 10:throw new Error("error getting top users");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t={movies:function(e){return H("explore/SET_TOP_USERS_BY_MOVIES",e)},friends:function(e){return H("explore/SET_TOP_USERS_BY_FRIENDS",e)},reviews:function(e){return H("explore/SET_TOP_USERS_BY_REVIEWS",e)},date_added_oldest:function(e){return H("explore/SET_TOP_USERS_BY_DATE_ADDED_OLDEST",e)},date_added_newest:function(e){return H("explore/SET_TOP_USERS_BY_DATE_ADDED_NEWEST",e)}},jt=function(e){return function(){var t=Object(A.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ot(e);case 3:n=t.sent,a(_t[e](n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ct=function(e){return function(){var t=Object(A.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(St(null)),t.next=3,fetch("/api/friends/".concat(e));case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0?7:12;break;case 7:return t.next=9,n.json();case 9:return r=t.sent,a(St(r)),t.abrupt("break",13);case 12:console.log("error fetching profile");case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Dt=function(e){return H("explore/SET_SEARCH",e)},Tt=function(e){return function(){var t=Object(A.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(Dt(e)),!e){t.next=15;break}return t.next=4,fetch("/api/friends/search/".concat(e));case 4:n=t.sent,t.t0=n.status,t.next=200===t.t0?8:14;break;case 8:return t.next=10,n.json();case 10:return r=t.sent,console.log(r),a(H("explore/SET_SEARCH_RESULTS",r.users)),t.abrupt("break",15);case 14:console.log("error");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var At=Object(pe.b)((function(e){return{friends:e.user.friends,friend_requests:e.user.friend_requests}}),(function(e){return Object(s.b)({loadProfile:Ct,addFriend:J},e)}))((function(e){var t=r.a.useState(""),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(e.friends||[]),c=Object(u.a)(i,2),s=c[0],m=c[1];r.a.useEffect((function(){m(e.friends.filter((function(e){return e.username.includes(n)})))}),[e.friends]);var d,f=function(){var t=Object(A.a)(T.a.mark((function t(a){return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),m(Object(F.a)(e.friends).filter((function(e){return e.username.includes(n)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(e.friend_requests.length>0){var v=function(){var t=Object(A.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.addFriend(a),t.next=3,fetch("/api/friends/acceptFriendRequest",{method:"post",body:JSON.stringify({id:a._id}),headers:{"Content-Type":"application/json"}});case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0?7:9;break;case 7:return console.log("success"),t.abrupt("break",10);case 9:console.log("error");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();d=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"drawer-header"},r.a.createElement("h2",null,"Friend Requests")),r.a.createElement("div",{className:"drawer-body"},e.friend_requests.map((function(t,a){var n;return r.a.createElement("div",{className:"friend-grid ".concat(a%2===0&&"background-dark"),key:t.username},r.a.createElement(o.c,{onClick:function(){return e.loadProfile(t._id)},to:"/explore/user/".concat(t._id)},r.a.createElement("div",{className:"identicon-wrapper-small"},r.a.createElement("svg",{className:"avatar-small"},null===(n=t.avatar)||void 0===n?void 0:n.tilemap.map((function(e,a){return e.map((function(e,n){var l,i;return r.a.createElement("rect",{x:17*n,y:17*a,width:17,height:17,style:{fill:1===(null===(l=t.avatar)||void 0===l?void 0:l.tilemap[a][n])?null===(i=t.avatar)||void 0===i?void 0:i.color:"#101518"},key:"".concat(n,"-").concat(a,"-rect")})}))}))))),r.a.createElement("div",{className:"username-title-small"},r.a.createElement("p",null,t.username)),r.a.createElement("div",{className:"username-title-small"},r.a.createElement(p.a,{title:"Friends"},r.a.createElement("p",{className:"inline-flex text-small"},r.a.createElement(it.a,null)," ",t.friends.length)),r.a.createElement("span",{className:"horizontal-padding"}," "),r.a.createElement(p.a,{title:"Movies",className:"margin-left"},r.a.createElement("p",{className:"inline-flex text-small margin-left-x"},r.a.createElement(yt.a,null)," ",t.friends.length))),r.a.createElement("span",null," "),r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{type:"button",className:"button-cancel margin-right friend-button"},"Decline")),r.a.createElement("button",{type:"submit",className:"button-submit friend-button",onClick:function(){return v(t)}},"Accept"))}))))}return r.a.createElement("div",{className:"drawer-content"},e.friend_requests&&d,r.a.createElement("div",{className:"drawer-header"},r.a.createElement("h2",null,"Friends")),r.a.createElement("div",{className:"drawer-body"},r.a.createElement("form",{autoComplete:"off",onSubmit:f},r.a.createElement("div",{className:"inline-flex full-width"},r.a.createElement(R.a,null),r.a.createElement("input",{type:"text","aria-labelledby":"movieSearchLabel",placeholder:"Search",className:"full-width",id:"searchInput",value:n,onChange:function(e){return l(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"button-submit float-right margin-top"},"Search")),s.map((function(t,a){var n;return r.a.createElement(o.c,{onClick:function(){return e.loadProfile(t._id)},to:"/explore/user/".concat(t._id),className:"friend-grid ".concat(a%2===0&&"background-dark"),key:t.username},r.a.createElement("div",{className:"identicon-wrapper-small"},r.a.createElement("svg",{className:"avatar-small"},null===(n=t.avatar)||void 0===n?void 0:n.tilemap.map((function(e,a){return e.map((function(e,n){var l,i;return r.a.createElement("rect",{x:17*n,y:17*a,width:17,height:17,style:{fill:1===(null===(l=t.avatar)||void 0===l?void 0:l.tilemap[a][n])?null===(i=t.avatar)||void 0===i?void 0:i.color:"#101518"},key:"".concat(n,"-").concat(a,"-rect")})}))})))),r.a.createElement("div",{className:"username-title-small"},r.a.createElement("p",null,t.username)),r.a.createElement("div",{className:"username-title-small"},r.a.createElement(p.a,{title:"Friends"},r.a.createElement("p",{className:"inline-flex text-small"},r.a.createElement(it.a,null)," ",t.friends.length)),r.a.createElement("span",{className:"horizontal-padding"}," "),r.a.createElement(p.a,{title:"Movies",className:"margin-left"},r.a.createElement("p",{className:"inline-flex text-small margin-left-x"},r.a.createElement(yt.a,null)," ",t.friends.length))))}))))})),Mt=(a(227),Object(pe.b)((function(e){return{movies:e.movies.movies}}))((function(e){var t=r.a.useState((function(){return e.exploreMovies.sort((function(e,t){return new Date(e.date_added.date)>new Date(t.date_added.date)?-1:1}))})),a=Object(u.a)(t,1)[0],n=r.a.useState(a),l=Object(u.a)(n,2),i=l[0],o=l[1],c=r.a.useState(""),s=Object(u.a)(c,2),m=s[0],d=s[1],f=r.a.useState(!1),E=Object(u.a)(f,2),g=E[0],b=E[1],h=r.a.useState(null),N=Object(u.a)(h,2),y=N[0],w=N[1],k=function(){b(!1)};return r.a.createElement("div",{className:"profile-content margin-top"},r.a.createElement(R.a,{className:"form-icon explore-icon"}),r.a.createElement("input",{type:"text",placeholder:"Search",className:"",value:m,onChange:function(e){var t=e.target.value;d(t),o(a.filter((function(e){var a;return null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase())})))}}),r.a.createElement("div",{className:"vertical-padding"}),i.map((function(t,a){var n,l=new Array(5).fill(!1).fill(!0,0,null===t||void 0===t?void 0:t.entertainment_rating),i=new Array(5).fill(!1).fill(!0,0,null===t||void 0===t?void 0:t.plot_rating),o=new Array(5).fill(!1).fill(!0,0,null===t||void 0===t?void 0:t.style_rating),c=new Array(5).fill(!1).fill(!0,0,null===t||void 0===t?void 0:t.bias_rating),s=[{title:"Entertainment",source:l,value:t.entertainment_rating},{title:"Writing",source:i,value:t.plot_rating},{title:"Style",source:o,value:t.style_rating},{title:"Bias",source:c,value:t.bias_rating}];return r.a.createElement("div",{className:"two-col-grid justify-center margin-top margin-bottom feed-item",key:t.title},r.a.createElement("img",{src:t.poster,alt:t.title,className:"poster-large"}),r.a.createElement("div",{className:"full-width feed-rating"},r.a.createElement("h2",{className:ge.isBrowser?"text-left":""},t.title," ",!(null===(n=e.movies)||void 0===n?void 0:n.find((function(e){return e._id.toString()===t._id})))&&r.a.createElement(p.a,{title:"Add Movie","aria-label":"add_movie",id:"add_movie",onClick:function(){return function(e){w(e),b(!0)}(t)}},r.a.createElement("button",{className:"add-button"},"+"))),s.map((function(e){return r.a.createElement("div",{className:ge.isBrowser?"two-col-grid":"feed-grid"},r.a.createElement("p",{className:"green text-left"},e.title,":"),r.a.createElement("div",{className:"margin-top-x no-padding"},e.source.map((function(e){return r.a.createElement("div",{className:e?"rating-dot active":"rating-dot"})})))," ")})),r.a.createElement("div",{className:ge.isBrowser?"two-col-grid":"feed-grid"},r.a.createElement("p",{className:"green text-left"},"Total Rating:"),r.a.createElement("p",{className:"text-left"},t.total_rating," / 20")),r.a.createElement("div",{className:ge.isBrowser?"two-col-grid":"feed-grid"},r.a.createElement("p",{className:"italics text-left"},Me()(t.date_added.date).format("MMMM D, YYYY"))),ge.isMobile&&r.a.createElement("div",{className:"vertical-padding"})))})),r.a.createElement(v.a,{className:"drawer",open:g,anchor:"right",onClose:k},r.a.createElement(Ee,{closeDrawer:k,propMovie:y})))}))),Rt=Object(pe.b)((function(e){return{username:e.user.username,avatar:e.user.avatar,friends:e.user.friends,reviews:e.user.reviews,movies:e.movies.movies,friend_requests:e.user.friend_requests,favorite_movie:e.user.favorite_movie}}))((function(e){var t,a,n,l=r.a.useState(null),i=Object(u.a)(l,2),c=i[0],s=i[1],m=r.a.useState(!1),d=Object(u.a)(m,2),f=d[0],b=d[1],h=r.a.useState(!1),N=Object(u.a)(h,2),w=N[0],k=N[1],S=r.a.useState(!1),x=Object(u.a)(S,2),O=x[0],_=x[1],j=r.a.useState("feed"),C=Object(u.a)(j,2),D=C[0];C[1];return r.a.createElement("div",{className:"Profile margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Your Intake profile. | Intake"),r.a.createElement("meta",{name:"description",content:"See your feed, friends, and more at your Intake profile page."})),r.a.createElement("div",{className:"banner-container"},r.a.createElement("div",{className:"identicon-wrapper float-left"},r.a.createElement("svg",{className:"avatar"},null===(t=e.avatar)||void 0===t?void 0:t.tilemap.map((function(t,a){return t.map((function(t,n){var l,i;return r.a.createElement("rect",{x:25*n,y:25*a,width:25,height:25,style:{fill:1===(null===(l=e.avatar)||void 0===l?void 0:l.tilemap[a][n])?null===(i=e.avatar)||void 0===i?void 0:i.color:"#171e22"},key:"".concat(n,"-").concat(a,"-rect")})}))})))),r.a.createElement("div",{className:"username-title float-left"},r.a.createElement("h1",null,e.username)),r.a.createElement("div",{className:"username-title float-right inline-flex"},e.friend_requests.length>0&&r.a.createElement("span",{className:"profile-alert"},e.friend_requests.length),r.a.createElement(p.a,{title:"Friends"},r.a.createElement("button",{type:"button","aria-label":"Friends Link",className:"hover-green button-icon",onClick:function(){return _(!0)}},r.a.createElement("p",{className:"inline-flex text-small"},r.a.createElement(it.a,null)," ",null===(a=e.friends)||void 0===a?void 0:a.length))),r.a.createElement(p.a,{title:"Movies",className:"margin-left"},r.a.createElement(o.c,{to:"/movies","aria-label":"Movies Link",className:"hover-green link true-white text-small button-icon"},r.a.createElement("p",{className:"inline-flex text-small"},r.a.createElement(y.a,null)," ",null===(n=e.movies)||void 0===n?void 0:n.length))),r.a.createElement(p.a,{title:"Settings",className:"margin-left"},r.a.createElement("button",{type:"button","aria-label":"Account Settings Link",className:"hover-green button-icon",onClick:function(e){return s(e.currentTarget)},"aria-controls":"profile-menu","aria-haspopup":"true"},r.a.createElement($e.a,null))),r.a.createElement(E.a,{id:"profile-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){return s(null)}},r.a.createElement(g.a,{onClick:function(){return b(!0)}},"Logout"),r.a.createElement(g.a,{className:"red",onClick:function(){return k(!0)}},"Delete Account")),r.a.createElement(ht,{open:w,closeDialog:function(){return k(!1)}}),r.a.createElement(gt,{open:f,closeDialog:function(){return b(!1)}}),r.a.createElement(v.a,{className:"drawer",open:O,anchor:"right",onClose:function(){return _(!1)}},r.a.createElement(At,{closeDrawer:function(){return _(!1)}})))),r.a.createElement("div",{className:"profile-container margin-top"},"feed"===D&&r.a.createElement(Mt,{exploreMovies:e.movies})))})),Bt=function(){var e=r.a.useState(""),t=Object(u.a)(e,2),a=t[0],n=t[1],l=r.a.useState(""),i=Object(u.a)(l,2),s=i[0],m=i[1],d=r.a.useState(""),f=Object(u.a)(d,2),v=f[0],E=f[1],g=r.a.useState(!1),b=Object(u.a)(g,2),h=b[0],N=b[1],y=r.a.useState(!1),w=Object(u.a)(y,2),k=w[0],S=w[1],x=r.a.useState(!0),O=Object(u.a)(x,2),_=O[0],j=O[1],C=r.a.useState(!1),D=Object(u.a)(C,2),M=D[0],R=D[1],B=r.a.useState(!1),F=Object(u.a)(B,2),L=F[0],I=F[1],U=r.a.useState(""),P=Object(u.a)(U,2),Y=P[0],W=P[1],H=Object(c.h)(),G=H.id,q=H.token;r.a.useEffect((function(){G&&q&&(S(!0),function(){var e=Object(A.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/passwordReset/".concat(G,"/").concat(q));case 2:200!==e.sent.status&&j(!1),S(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[G,q]);var z=function(){var e=Object(A.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(""),t.preventDefault(),e.next=4,fetch("/api/user/passwordReset",{method:"post",body:JSON.stringify({email:a}),headers:{"Content-Type":"application/json"}});case 4:n=e.sent,console.log(n),e.t0=n.status,e.next=200===e.t0?9:11;break;case 9:return I(!0),e.abrupt("break",13);case 11:W("An unexpected error occured. Try again soon."),I(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(A.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==v){e.next=10;break}return console.log("epic"),e.next=5,fetch("/api/user/passwordReset/".concat(G,"/").concat(q),{method:"post",body:JSON.stringify({password:s}),headers:{"Content-Type":"application/json"}});case 5:a=e.sent,console.log(a.status),200===a.status?R(!0):W("An unexpected error occured. Try again later."),e.next=11;break;case 10:W("Passwords don't match");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k?r.a.createElement("p",null,"loading"):_?M?r.a.createElement("div",{className:"Login text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Reset your Intake account password. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Enter your new password to complete the Intake account password reset process."})),r.a.createElement("p",null,"Password successfully reset. Please return to"," ",r.a.createElement(o.c,{className:"link white button-icon",to:"/login"},"login")," ")):r.a.createElement("div",{className:"Login text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Reset your Intake account password. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Send a password reset email to the email linked to your Intake account to start the password reset process."})),r.a.createElement("h1",null,"Reset Password"),r.a.createElement("div",{className:"vertical-padding"}),G&&q?r.a.createElement("form",{onSubmit:J,className:"text-centered login-form"},r.a.createElement("div",{className:"inline-flex margin-top row-reverse"},r.a.createElement("input",{"aria-label":"password",placeholder:"Password",className:"input-large margin-left",type:h?"text":"password",value:s,onChange:function(e){return m(e.target.value)}}),r.a.createElement(p.a,{title:h?"Hide Password":"Show Password"},r.a.createElement("button",{type:"button",className:"button-icon","aria-label":h?"hide password":"show password",onClick:function(){return N(!h)}},h?r.a.createElement(ut.a,null):r.a.createElement(ct.a,null)))),r.a.createElement("div",{className:"inline-flex margin-top row-reverse"},r.a.createElement("input",{"aria-label":"comfirm password",placeholder:"Comfirm Password",className:"input-large margin-left",type:h?"text":"password",value:v,onChange:function(e){return E(e.target.value)}}),r.a.createElement("button",{type:"button",className:"button-icon","aria-label":h?"hide password":"show password",onClick:function(){return N(!h)}},h?r.a.createElement(ut.a,null):r.a.createElement(ct.a,null))),r.a.createElement("button",{type:"submit",className:"button-submit float-right margin-top"},"Reset Password"),r.a.createElement("p",{className:"red"},Y)):r.a.createElement("form",{onSubmit:z,className:"text-centered login-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(it.a,null),r.a.createElement("input",{type:"text",placeholder:"Email",className:"input-large margin-left",value:a,onChange:function(e){return n(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"button-submit float-right margin-top"},"Send Reset Link")),r.a.createElement(V,{error:Y,open:L,handleClose:function(){return I(!1)},success:"Reset link sent"})):r.a.createElement("p",null,"Reset link timed out...")},Ft=(a(318),a(319),a(185)),Lt=a.n(Ft),It=function(e){return r.a.createElement("div",{id:"favorite-movie-containter"},e.user.favorite_movie?r.a.createElement("p",null,"yo"):r.a.createElement("div",null,r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("p",{className:"italics"},"This user hasn't added a favorite movie.")))},Ut=Object(pe.b)((function(e){return{currentUser:e.explore.currentUser,friends:e.user.friends,username:e.user.username}}),(function(e){return Object(s.b)({loadProfile:Ct,addFriend:J},e)}))((function(e){var t,a,n=r.a.useState(!1),l=Object(u.a)(n,2),i=l[0],o=l[1],s=r.a.useState("feed"),m=Object(u.a)(s,2),d=m[0],f=(m[1],Object(c.h)().id);if(!e.currentUser)return e.loadProfile(f),r.a.createElement("p",null,"loading");if((null===(t=e.currentUser)||void 0===t?void 0:t.username)===e.username)return console.log(e.currentUser),r.a.createElement(c.a,{to:"/profile"});var v=function(){o(!1)},E=function(){var t=Object(A.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.currentUser&&e.addFriend(e.currentUser),console.log(f),t.next=4,fetch("/api/friends/addFriend",{method:"post",body:JSON.stringify({id:f}),headers:{"Content-Type":"application/json"}});case 4:a=t.sent,t.t0=a.status,t.next=200===t.t0?8:10;break;case 8:return v(),t.abrupt("break",11);case 10:console.log("error!");case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"Profile margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"See ",e.currentUser.username,"'s Intake | INTAKE"),r.a.createElement("meta",{name:"description",content:"See ".concat(e.currentUser.username,"'s feed and friends. Add any movie that ").concat(e.currentUser.username," and make a friend request if you like what you see so that their activity will show up in your feed.")})),r.a.createElement("div",{className:"banner-container"},r.a.createElement("div",{className:"identicon-wrapper float-left"},r.a.createElement("svg",{className:"avatar"},null===(a=e.currentUser.avatar)||void 0===a?void 0:a.tilemap.map((function(t,a){return t.map((function(t,n){var l,i,o,c;return r.a.createElement("rect",{x:25*n,y:25*a,width:25,height:25,style:{fill:1===(null===(l=e.currentUser)||void 0===l||null===(i=l.avatar)||void 0===i?void 0:i.tilemap[a][n])?null===(o=e.currentUser)||void 0===o||null===(c=o.avatar)||void 0===c?void 0:c.color:"#171e22"},key:"".concat(n,"-").concat(a,"-rect")})}))})))),r.a.createElement("div",{className:"username-title float-left"},r.a.createElement("h1",null,e.currentUser.username)),r.a.createElement("div",{className:"username-title float-right inline-flex bump-up",id:"profileButtons"},r.a.createElement(p.a,{title:"Friends"},r.a.createElement("p",{className:"text-small"},r.a.createElement(it.a,null)," ",e.currentUser.friends.length)),r.a.createElement(p.a,{title:"Movies",className:"margin-left"},r.a.createElement("p",{className:"text-small"},r.a.createElement(y.a,null)," ",e.currentUser.movies.length)),!e.friends.find((function(t){return e.currentUser&&t.username===e.currentUser.username}))&&e.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Add Friend",className:"margin-left"},r.a.createElement("button",{type:"button","aria-label":"Add Friend Link",className:"hover-green button-icon",onClick:function(){return o(!0)},"aria-controls":"add-friend-dialog","aria-haspopup":"true"},r.a.createElement(Lt.a,null))),r.a.createElement(Ge.a,{open:i,onClose:v,"aria-labelledby":"add-friend-title","aria-describedby":"add-friend-description",id:"add-friend-dialog"},r.a.createElement(Ke.a,{id:"add-friend-title"},"Add ".concat(e.currentUser.username," as a friend?")),r.a.createElement(ze.a,null,r.a.createElement(Je.a,{id:"add-friend-description"},"Once ",e.currentUser.username," accepts your friend request, their movie ratings and reviews will be added to your explore feed.")),r.a.createElement(qe.a,null,r.a.createElement("button",{className:"button-cancel",onClick:v},"Cancel"),r.a.createElement("button",{className:"button-submit",onClick:E},"Add Friend")))))),r.a.createElement("div",{className:"profile-container"},"favorite"===d&&r.a.createElement(It,{user:e.currentUser}),"feed"===d&&r.a.createElement(Mt,{exploreMovies:e.currentUser.movies})))})),Pt=a(345),Yt=a.n(Pt),Vt=Object(pe.b)((function(e){return{friends:e.user.friends,username:e.user.username}}),(function(e){return Object(s.b)({loadProfile:Ct,addFriend:J},e)}))((function(e){var t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(null),c=Object(u.a)(i,2),s=c[0],m=c[1],d=r.a.useState(!1),f=Object(u.a)(d,2),v=f[0],E=f[1],g=r.a.useState(""),b=Object(u.a)(g,2),h=b[0],N=b[1],w=function(){l(!1)},k=function(){var t=Object(A.a)(T.a.mark((function t(a){var n,r;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(""),t.next=3,fetch("/api/friends/addFriend",{method:"post",body:JSON.stringify({id:a._id}),headers:{"Content-Type":"application/json"}});case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0?7:11;break;case 7:return e.addFriend(a),w(),E(!0),t.abrupt("break",17);case 11:return t.next=13,n.json();case 13:r=t.sent,w(),N(r.error),E(!0);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"user-feed"},e.users.map((function(t){var a,n=e.friends.find((function(e){return t&&e.username===t.username}));return r.a.createElement("div",{className:n||e.username===t.username?"user-container-friend":"user-container",key:t.username},r.a.createElement(o.c,{onClick:function(){return e.loadProfile(t._id)},to:"/explore/user/".concat(t._id)},r.a.createElement("div",{className:"identicon-wrapper"},r.a.createElement("svg",{className:"avatar"},null===(a=t.avatar)||void 0===a?void 0:a.tilemap.map((function(e,a){return e.map((function(e,n){var l,i;return r.a.createElement("rect",{x:25*n,y:25*a,width:25,height:25,style:{fill:1===(null===(l=t.avatar)||void 0===l?void 0:l.tilemap[a][n])?null===(i=t.avatar)||void 0===i?void 0:i.color:"#171e22"},key:"".concat(n,"-").concat(a,"-rect")})}))}))))),r.a.createElement(o.c,{onClick:function(){return e.loadProfile(t._id)},to:"/explore/user/".concat(t._id),className:"link white hover-green"},r.a.createElement("h2",{className:"username"},t.username," ",r.a.createElement("p",{className:"italics text-small grey"},"User since"," ",Me()(t.date_registered).format("MMM DD, YYYY")))),r.a.createElement("div",{className:"icons"},e.username&&!n&&e.username!==t.username&&r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Add Friend",className:"icon"},r.a.createElement("p",{className:"text-small"},r.a.createElement("button",{type:"button","aria-label":"Add Friend Link",className:"hover-green button-icon",onClick:function(){return function(e){m(e),l(!0)}(t)},"aria-controls":"add-friend-dialog","aria-haspopup":"true"},r.a.createElement(Lt.a,null))))),r.a.createElement(p.a,{title:"Friends",className:"icon"},r.a.createElement("p",{className:"text-small"},r.a.createElement(it.a,null)," ",t.friends.length)),r.a.createElement(p.a,{title:"Movies",className:"icon"},r.a.createElement("p",{className:"text-small"},r.a.createElement(y.a,null)," ",t.movies.length)),r.a.createElement(p.a,{title:"Reviews",className:"icon"},r.a.createElement("p",{className:"text-small"},r.a.createElement(Yt.a,null)," ",t.reviews.length))))})),r.a.createElement(Ge.a,{open:n,onClose:w,"aria-labelledby":"add-friend-title","aria-describedby":"add-friend-description",id:"add-friend-dialog"},r.a.createElement(Ke.a,{id:"add-friend-title"},"Add  ".concat(null===s||void 0===s?void 0:s.username," as a friend?")),r.a.createElement(ze.a,null,r.a.createElement(Je.a,{id:"add-friend-description"},"Once ",null===s||void 0===s?void 0:s.username," accepts your friend request, their movie ratings and reviews will be added to your explore feed.")),r.a.createElement(qe.a,null,r.a.createElement("button",{className:"button-cancel",onClick:w},"Cancel"),r.a.createElement("button",{className:"button-submit",onClick:function(){return k(s)}},"Add Friend"))),r.a.createElement(V,{error:h,success:"Friend request sent",handleClose:function(){return E(!1)},open:v}))})),Wt=Object(pe.b)((function(e){return{topUsersByMovies:e.explore.topUsersByMovies,topUsersByFriends:e.explore.topUsersByFriends,topUsersByReviews:e.explore.topUsersByReviews,topUsersByDateAddedOldest:e.explore.topUsersByDateAddedOldest,topUsersByDateAddedNewest:e.explore.topUsersByDateAddedNewest,filter:e.explore.filter,search:e.explore.search,searchResults:e.explore.searchResults}}),(function(e){return Object(s.b)({setTopUsers:jt,setFilter:kt,setSearch:Tt},e)}))((function(e){var t=r.a.useState([]),a=Object(u.a)(t,2),n=a[0],l=a[1];return r.a.useEffect((function(){switch(e.filter){case"movies":e.topUsersByMovies||e.setTopUsers("movies");break;case"friends":e.topUsersByFriends||e.setTopUsers("friends");break;case"reviews":e.topUsersByReviews||e.setTopUsers("reviews");break;case"date_added_oldest":e.topUsersByDateAddedOldest||e.setTopUsers("date_added_oldest");break;case"date_added_newest":e.topUsersByDateAddedNewest||e.setTopUsers("date_added_newest")}}),[e.filter]),r.a.useEffect((function(){switch(e.filter){case"movies":e.topUsersByMovies&&l(e.topUsersByMovies);break;case"friends":e.topUsersByFriends&&l(e.topUsersByFriends);break;case"reviews":e.topUsersByReviews&&l(e.topUsersByReviews);break;case"date_added_oldest":e.topUsersByDateAddedOldest&&l(e.topUsersByDateAddedOldest);break;case"date_added_newest":e.topUsersByDateAddedNewest&&l(e.topUsersByDateAddedNewest)}e.search&&l(e.searchResults)}),[e]),r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"two-col-grid margin-top"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"align-right"},r.a.createElement("select",{"aria-label":"user filter",value:e.filter,onChange:function(t){return e.setFilter(t.target.value)},className:"float-right margin-top explore-select"},r.a.createElement("option",{value:"movies"},"Movies Seen"),r.a.createElement("option",{value:"friends"},"Friends"),r.a.createElement("option",{value:"reviews"},"Reviews"),r.a.createElement("option",{value:"date_added_oldest"},"Date Registered (Oldest)"),r.a.createElement("option",{value:"date_added_newest"},"Date Registered (Newest)"))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"align-left bump-down-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(R.a,{className:"form-icon"}),r.a.createElement("input",{type:"text",value:e.search,onChange:function(t){return e.setSearch(t.target.value)},placeholder:"Search",className:"explore-input"})))),r.a.createElement(Vt,{users:n}))})),Ht=Object(pe.b)((function(e){return{friends:e.user.friends,feed:e.explore.feed,movies:e.movies.movies}}),(function(e){return Object(s.b)({getFeed:xt,loadProfile:Ct},e)}))((function(e){var t=r.a.useState(!1),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState(null),c=Object(u.a)(i,2),s=c[0],m=c[1],d=function(){l(!1)};return e.feed?0===e.feed.length?r.a.createElement("div",{className:"profile-content margin-top"},r.a.createElement("p",{className:"grey italics"},"Your friends haven't been very active... check back soon!")):r.a.createElement("div",{className:"profile-content margin-top"},e.feed.map((function(t,a){var n,i,c=t.movie,s=new Array(5).fill(!1),u=new Array(5).fill(!1),d=new Array(5).fill(!1),f=new Array(5).fill(!1),v=[{title:"Entertainment",source:s,value:c.entertainment_rating},{title:"Writing",source:u,value:c.plot_rating},{title:"Style",source:d,value:c.style_rating},{title:"Bias",source:f,value:c.bias_rating}];return r.a.createElement("div",{className:"feed-item",key:t.movie.title},r.a.createElement("div",{className:"two-col-grid margin-top margin-bottom",key:c.title},r.a.createElement("div",{className:"feed-poster"},r.a.createElement("img",{src:c.poster,alt:c.title,className:"poster-large"})),r.a.createElement("div",{className:"full-width feed-rating"},r.a.createElement("h2",{className:"feed-title"},c.title," ",!(null===(n=e.movies)||void 0===n?void 0:n.find((function(e){return e._id===t.movie._id})))&&r.a.createElement(p.a,{title:"Add Movie","aria-label":"add_movie",id:"add_movie",onClick:function(){return function(e){m(e),l(!0)}(t.movie)}},r.a.createElement("button",{className:"add-button"},"+"))),v.map((function(e){return r.a.createElement("div",{className:"feed-grid",key:"".concat(t.movie.title,"_").concat(e.title)},r.a.createElement("p",{className:"green text-left"},e.title,":"),r.a.createElement("div",{className:"margin-top-x no-padding"},e.source.map((function(a,n){return r.a.createElement("div",{className:"rating-dot",key:"".concat(t.movie.title,"_").concat(e.title,"_").concat(n.toString())},e.value-n>0&&(e.value-n<1?r.a.createElement("div",{className:"rating-dot-filler"}):r.a.createElement("div",{className:"rating-dot-filler",style:{width:"10px"}})))})))," ")})),r.a.createElement("div",{className:"feed-grid"},r.a.createElement("p",{className:"green text-left"},"Total Rating:"),r.a.createElement("p",{className:"text-left"},c.total_rating," / 20")),r.a.createElement(o.c,{onClick:function(){return e.loadProfile(t.user_id)},to:"/explore/user/".concat(t.user_id),className:"feed-user-container link white","aria-label":"See ".concat(t.username,"'s profile")},r.a.createElement("div",{className:"feed-avatar-wrapper"},r.a.createElement("svg",{className:"feed-avatar"},null===(i=t.avatar)||void 0===i?void 0:i.tilemap.map((function(e,a){return e.map((function(e,n){var l,i;return r.a.createElement("rect",{x:6*n,y:6*a,width:6,height:6,style:{fill:1===(null===(l=t.avatar)||void 0===l?void 0:l.tilemap[a][n])?null===(i=t.avatar)||void 0===i?void 0:i.color:"#171e22"},key:"".concat(n,"-").concat(a,"-rect")})}))})))),r.a.createElement("p",{className:"feed-username"},t.username)),r.a.createElement("div",{className:"feed-date"},r.a.createElement("p",{className:"italics gray full-width"},Me()(t.movie.date_added.date).format("MMM DD, YYYY"))))))})),r.a.createElement(v.a,{className:"drawer",open:n,anchor:"right",onClose:d},r.a.createElement(Ee,{closeDrawer:d,propMovie:s}))):(e.getFeed(),r.a.createElement("p",null,"loading"))})),Gt=Object(pe.b)((function(e){return{userMovies:e.movies.movies}}))((function(e){var t,a=r.a.useState(!1),n=Object(u.a)(a,2),l=n[0],i=n[1],o=r.a.useState(null),c=Object(u.a)(o,2),s=c[0],m=c[1],d=function(){i(!1)};return r.a.createElement("div",{className:"profile-content margin-top"},e.movies&&e.movies.length>0?null===(t=e.movies)||void 0===t?void 0:t.map((function(t,a){var n;t.entertainment_rating_average||(t.entertainment_rating_average=0),t.plot_rating_average||(t.plot_rating_average=0),t.style_rating_average||(t.style_rating_average=0),t.bias_rating_average||(t.bias_rating_average=0),t.total_rating_average||(t.total_rating_average=0);var l=new Array(5).fill(!1),o=new Array(5).fill(!1),c=new Array(5).fill(!1),s=new Array(5).fill(!1),u=[{title:"Entertainment",source:l,value:Number(t.entertainment_rating_average.toLocaleString("fullwide",{maximumFractionDigits:2}))},{title:"Writing",source:o,value:Number(t.plot_rating_average.toLocaleString("fullwide",{maximumFractionDigits:2}))},{title:"Style",source:c,value:Number(t.style_rating_average.toLocaleString("fullwide",{maximumFractionDigits:2}))},{title:"Bias",source:s,value:Number(t.bias_rating_average.toLocaleString("fullwide",{maximumFractionDigits:2}))}];return r.a.createElement("div",{className:"feed-item",key:t._id},r.a.createElement("div",{className:"two-col-grid margin-top margin-bottom",key:t.title},r.a.createElement("div",{className:"feed-poster"},r.a.createElement("img",{src:t.poster,alt:t.title,className:"poster-large"})),r.a.createElement("div",{className:"full-width feed-rating"},r.a.createElement("h2",{className:"feed-title"},t.title," ",!(null===(n=e.userMovies)||void 0===n?void 0:n.find((function(e){return e._id.toString()===t._id})))&&r.a.createElement(p.a,{title:"Add Movie","aria-label":"add_movie",id:"add_movie",onClick:function(){return function(e){var t;t=Object.assign(Object(W.a)({},e)),m(t),i(!0)}(t)}},r.a.createElement("button",{className:"add-button"},"+"))),u.map((function(e){return r.a.createElement("div",{className:"feed-grid",key:"".concat(e.title,"_").concat(t.title)},r.a.createElement("p",{className:"green text-left"},e.title,":"),r.a.createElement("div",{className:"margin-top-x no-padding"},e.source.map((function(a,n){return r.a.createElement("div",{className:"rating-dot",key:"".concat(e.title,"_").concat(t.title,"_").concat(n)},e.value-n>0&&(e.value-n<1?r.a.createElement("div",{className:"rating-dot-filler",style:{width:"".concat(10*(e.value-n),"px")}}):r.a.createElement("div",{className:"rating-dot-filler",style:{width:"10px"}})))})))," ")})),r.a.createElement("div",{className:"feed-grid"},r.a.createElement("p",{className:"green text-left"},"Total Rating:"),r.a.createElement("p",{className:"text-left"},t.total_rating_average.toLocaleString("fullwide",{maximumFractionDigits:2})," / 20")),r.a.createElement("div",{className:"feed-grid"},r.a.createElement("p",{className:"green text-left"},"Total Entries: "),r.a.createElement("p",{className:"text-left"},t.ratings_length)))))})):r.a.createElement("p",{className:"italics grey"},"No movies matches your query"),r.a.createElement(v.a,{className:"drawer",open:l,anchor:"right",onClose:d},r.a.createElement(Ee,{closeDrawer:d,propMovie:s})))})),qt=Object(pe.b)((function(e){return{topMoviesByPopularity:e.movies.topMoviesByPopularity,topMoviesByEntertainment:e.movies.topMoviesByEntertainment,topMoviesByBias:e.movies.topMoviesByBias,topMoviesByPlot:e.movies.topMoviesByPlot,topMoviesByStyle:e.movies.topMoviesByStyle,topMoviesByTotal:e.movies.topMoviesByTotal,filter:e.movies.filter,search:e.movies.search,searchResults:e.movies.searchResults}}),(function(e){return Object(s.b)({setTopMovies:ue,setFilter:ce,searchMovies:ie,setSearch:re},e)}))((function(e){var t=r.a.useState([]),a=Object(u.a)(t,2),n=a[0],l=a[1],i={popularity:e.topMoviesByPopularity,total:e.topMoviesByTotal,entertainment:e.topMoviesByEntertainment,plot:e.topMoviesByPlot,style:e.topMoviesByStyle,bias:e.topMoviesByBias};r.a.useEffect((function(){i[e.filter]||e.setTopMovies(e.filter)}),[e.filter]),r.a.useEffect((function(){if(e.searchResults&&e.search)return l(e.searchResults);i[e.filter]&&l(i[e.filter]),e.filter||l(i.popularity)}),[e]);return r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"two-col-grid margin-top"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"align-right"},r.a.createElement("select",{"aria-label":"movie filter",value:e.filter,onChange:function(t){return e.setFilter(t.target.value)},className:"float-right margin-top explore-select",defaultValue:"popularity"},r.a.createElement("option",{value:"popularity"},"Most Popular"),r.a.createElement("option",{value:"total"},"Highest Rated"),r.a.createElement("option",{value:"entertainment"},"Most Entertaining"),r.a.createElement("option",{value:"plot"},"Best Written"),r.a.createElement("option",{value:"style"},"Most Stylish"),r.a.createElement("option",{value:"bias"},"Most Biased"))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"align-left bump-down-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(R.a,{className:"form-icon"}),r.a.createElement("input",{type:"text",value:e.search,onChange:function(t){e.setSearch(t.target.value),e.searchMovies(t.target.value)},placeholder:"Search",className:"explore-input"})))),r.a.createElement(Gt,{movies:n}))})),zt=Object(pe.b)((function(e){return{username:e.user.username}}))((function(e){var t=r.a.useState(e.username?"feed":"movies"),a=Object(u.a)(t,2),n=a[0],l=a[1],i=Object(c.h)(),o=i.type,s=i.id;if(o)switch(o){case"user":if(s)return r.a.createElement(Ut,null)}return r.a.createElement("div",{className:"Explore margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Explore the Intake community | INTAKE"),r.a.createElement("meta",{name:"description",content:"Explore what the Intake community has been up to. See friends' feeds and top rated movies, and find new friends."})),r.a.createElement("h1",null,"Explore"),r.a.createElement("div",{className:"explore-nav-container"},r.a.createElement("nav",{className:"explore-nav"},e.username&&r.a.createElement("button",{className:"button-icon margin-right ".concat("feed"===n&&"green"),onClick:function(){return l("feed")}},"Feed"),r.a.createElement("button",{className:"button-icon margin-right ".concat("movies"===n&&"green"),onClick:function(){return l("movies")}},"Movies"),r.a.createElement("button",{className:"button-icon margin-right margin-left ".concat("users"===n&&"green"),onClick:function(){return l("users")}},"Users"))),"users"===n&&r.a.createElement(Wt,null),"movies"===n&&r.a.createElement(qt,null),"feed"===n&&e.username&&r.a.createElement(Ht,null))})),Jt=a(346),Kt=r.a.memo((function(e){var t=r.a.useState(ea[Math.floor(Math.random()*ea.length)]),a=Object(u.a)(t,1)[0],n=r.a.useState([]),l=Object(u.a)(n,2),i=l[0],c=l[1],s=r.a.useState([]),m=Object(u.a)(s,2),d=m[0],f=m[1],v={name:"root",color:"hsl(1, 70%, 50%)",children:i};if(r.a.useEffect((function(){var t=function(e,t){var a=Object.keys(e),n=a.length>0&&e[a.reduce((function(a,n){return e[n][t]<e[a][t]?n:a}))][t];return a.map((function(a){return{name:a,loc:e[a][t]-(n-1),value:e[a][t],movies:e[a].movies}}))}(e.values,e.filter);c(Object(F.a)(t)),t.sort((function(e,t){return t.value-e.value})),f(t)}),[e]),0===i.length)return r.a.createElement("p",null,"no data has been collected yet");var E=v.children.reduce((function(e,t){return t.loc>e.loc?t:e})).loc,g=E<a.length?1:Math.ceil(E/a.length),b=function(e){return"root"===e.name?"#1E262A":a[Math.ceil(e.loc/g)-1]};return r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble"},r.a.createElement(Jt.a,{root:v,theme:{tooltip:{container:{padding:0}}},margin:{top:20,right:20,bottom:20,left:20},identity:"name",value:"loc",colors:b,padding:6,labelSkipRadius:50,label:function(e){return"".concat(e.id)},labelTextColor:"black",borderWidth:2,borderColor:{from:"color"},animate:!0,tooltip:function(e){if("root"!==e.data.name)return r.a.createElement("p",{className:"tooltip inline-flex bubble-tooltip"},r.a.createElement("span",{className:"color-indicator",style:{backgroundColor:e.color}}),e.data.name,": ",e.data.value)},motionStiffness:90,motionDamping:12,isZoomable:!1,onMouseEnter:function(e){return console.log(e)}})),r.a.createElement("div",{className:"legend"},r.a.createElement("h3",null,"Legend"),d.map((function(t,a){return r.a.createElement("div",{className:"legend-entry",key:t.name},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"legend-indicator",style:{backgroundColor:b(t)}}),r.a.createElement(ge.BrowserView,null,r.a.createElement(p.a,{title:"See stats for ".concat(t.name," movies")},r.a.createElement(o.c,{to:"".concat(e.link,"/").concat(t.name),className:"green link"},t.name))," ",":"," ",t.value.toLocaleString("fullwide",{maximumFractionDigits:2})),r.a.createElement(ge.MobileView,null,r.a.createElement(p.a,{title:"See stats for ".concat(t.name," movies")},r.a.createElement("p",null,r.a.createElement(o.c,{to:"".concat(e.link,"/").concat(t.name),className:"green link"},t.name),":"," ",t.value.toLocaleString("fullwide",{maximumFractionDigits:2}))))))}))))})),Xt=a(684),Zt=a(650),$t=a(692),Qt=a(677),ea=[["#FFF7F3","#FCC5C0","#FA9FB5","#F768A1","#DD3497"],["#EAFFF7","#C8F3E5","#A5E7D2","#83DBC0","#60CFAD"],["#DDDDDF","#D0C4DF","#DCABDF","#C792DF"],["#fef9ef","#ffcb77","#17c3b2","#227c9d","#fe6d73"],["#598392","#1a659e","#ff6b35","#f7c59f","#efefd0"],["#7bdff2","#b2f7ef","#eff7f6","#f7d6e0","#f2b5d4"]],ta={Genres:"genres",Themes:"themes",Directors:"director",Runtimes:"runtime",Writers:"writer","Content Ratings":"rated",Years:"year"},aa=Object(pe.b)((function(e){return{movies:e.movies.movies}}))((function(e){var t=r.a.useState({}),a=Object(u.a)(t,2),n=a[0],l=a[1],i=r.a.useState("movies"),s=Object(u.a)(i,2),m=s[0],d=s[1],p=r.a.useState(""),f=Object(u.a)(p,2),v=f[0],E=f[1],g=r.a.useState([]),b=Object(u.a)(g,2),h=b[0],N=b[1],y=r.a.useState(!1),w=Object(u.a)(y,2),k=w[0],S=w[1],x=r.a.useState(!1),O=Object(u.a)(x,2),_=O[0],j=O[1],C=Object(c.h)().title,D=ta[C],T=function(e,t,a){return e[t]?(e[t].movies++,e[t].total+=a.total_rating,e[t].entertainment+=a.entertainment_rating,e[t].plot+=a.plot_rating,e[t].style+=a.style_rating,e[t].bias+=a.bias_rating):e[t]={movies:1,total:a.total_rating,entertainment:a.entertainment_rating,plot:a.plot_rating,style:a.style_rating,bias:a.bias_rating},e};r.a.useEffect((function(){if(e.movies){var t={};e.movies.forEach((function(e){var a=e[D];a instanceof Array?a.forEach((function(a){t=T(t,a,e)})):t=T(t,a,e)})),Object.keys(t).forEach((function(e){for(var a=Object.keys(t[e]),n=1;n<a.length;n++)t[e][a[n]]=Number((t[e][a[n]]/t[e].movies).toFixed(2))})),l(t)}}),[e.movies]);var A=[{name:"Stats",href:"/stats"},{name:C}];return r.a.createElement("div",{className:"Stats text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Your personal ",C.substring(0,C.length-1)," statistics | INTAKE"),r.a.createElement("meta",{name:"description",content:"See the statistics for the ".concat(C.toLowerCase()," of your favorite movies. Sort ").concat(C.toLowerCase()," by popularity and ratings, search for specific ").concat(C.toLowerCase(),", and find out what your favorite ").concat(C.toLowerCase()," are.")})),r.a.createElement(Le,{crumbs:A}),r.a.createElement("h1",null,"".concat(C.substring(0,C.length-1)," Statistics")),r.a.createElement("div",{className:"two-col-grid margin-top"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:ge.isBrowser?"align-right":""},r.a.createElement("select",{"aria-label":"user filter",className:"float-right margin-top stat-select",value:m,onChange:function(e){return d(e.target.value)}},r.a.createElement("option",{value:"movies"},"Movies Seen"),r.a.createElement("option",{value:"total"},"Highest Rated"),r.a.createElement("option",{value:"entertainment"},"Most Entertaining"),r.a.createElement("option",{value:"plot"},"Best Writing"),r.a.createElement("option",{value:"style"},"Most Stylish"),r.a.createElement("option",{value:"bias"},"Favorite"))),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},className:"align-left bump-down-form"},r.a.createElement(Qt.a,{onClickAway:function(){return S(!1)}},r.a.createElement("div",null,r.a.createElement("div",{className:"inline-flex"},r.a.createElement(R.a,{className:"form-icon"}),r.a.createElement("input",{type:"text",placeholder:"Search",className:"stat-search",value:v,onChange:function(e){j(!1),E(e.target.value);var t=Object.keys(n);N(t.filter((function(t){return t.toLowerCase().includes(e.target.value.toLowerCase())}))),h.length>0&&e.target.value.length>0?S(!0):0===h.length&&e.target.value.length>0?j(!0):S(!1)},"aria-controls":"results-menu","aria-haspopup":"true"})),r.a.createElement(Xt.a,{component:"nav","aria-label":"search results",className:"search-results",style:{display:k?"block":"none"}},_?r.a.createElement("p",{className:"grey italics",style:{marginLeft:"10px"}},"No ",C.toLowerCase()," match your search."):h.map((function(e){return r.a.createElement(o.c,{to:"/stats/".concat(ta[C],"/").concat(e),className:"white link",key:e},r.a.createElement(Zt.a,{button:!0,className:"search-result-wrapper"},r.a.createElement($t.a,{primary:e})))}))))))),r.a.createElement(Kt,{values:n,filter:m,link:"/stats/".concat(ta[C])}))})),na=a(693),ra=a(625),la=function(){return r.a.createElement(ra.a,{open:!0},r.a.createElement(na.a,{color:"inherit",className:"loading-icon"}))},ia=Object(pe.b)((function(e){return{username:e.user.username}}))((function(e){return e.username?r.a.createElement(c.b,e):e.redirect?r.a.createElement(c.a,{to:e.redirect}):r.a.createElement(c.a,{to:"/login"})})),oa=Object(pe.b)((function(e){return{username:e.user.username}}))((function(e){return e.username?e.redirect?r.a.createElement(c.a,{to:e.redirect}):r.a.createElement(c.a,{to:"/"}):r.a.createElement(c.b,e)})),ca=function(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",null,"INTAKE"))},sa=a(348),ua=a.n(sa),ma=a(143),da=a.n(ma),pa=function(){return r.a.createElement("div",{className:"text-centered"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Welcome to Intake. Log movies you watch - get personalized statistics. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Intake is a tool that tracks media consumption. Add movies to your feed, rate them using our one-of-a-kind rating system, and see personalized statistics based on the movies you watch. Explore what the most popular movies on Intake are, and find new friends with similar viewing tastes."})),r.a.createElement("div",{className:"jumbotron-filler"}),r.a.createElement("div",{className:"z-indexed"},r.a.createElement("a",{className:"button-icon white",type:"button",href:"/#purpose"},r.a.createElement(ua.a,null)),r.a.createElement("div",{className:"grid"},r.a.createElement("div",{id:"purpose",className:"landing-entry"},r.a.createElement("h2",null,"Mission"),r.a.createElement("p",{className:"text-left indented"},"Intake is a tool created to track media consumption. Add movies to your feed, rate them, review them, and then learn more about your tastes through the use of our built-in viewing statistics.")),r.a.createElement("div",{className:" landing-entry"},r.a.createElement("h2",null,"Rating Movies"),r.a.createElement("p",{className:"text-left indented"},"Intake stands out for the unique criteria that makes up its rating system. Each of the following categories is rated between 0 and 5:"),r.a.createElement("p",{className:"text-left"},r.a.createElement("b",{className:"green"},r.a.createElement(da.a,{className:"landing-icon"})," Entertainment: "),"How fun was the movie?"),r.a.createElement("p",{className:"text-left"},r.a.createElement("b",{className:"green"},r.a.createElement(da.a,{className:"landing-icon"})," Writing: "),"How strong was the plot? How about the characters?"),r.a.createElement("p",{className:"text-left"},r.a.createElement("b",{className:"green"},r.a.createElement(da.a,{className:"landing-icon"})," Style: ")," Did the movie have a consistent and evocative style? How interesting was the cinematography?"),r.a.createElement("p",{className:"text-left"},r.a.createElement("b",{className:"green"},r.a.createElement(da.a,{className:"landing-icon"})," Bias: "),"Sometimes the best movies aren't our favorite movies, and vice versa. Look back at the other ratings. Does the movie deserve such high praise? Was it underrated? Was it your favorite movie growing up? Use your bias to self correct and give a total rating that more accurately reflects your own personal opinion."))),r.a.createElement(ca,null)))},fa=function(){var e=r.a.useState(""),t=Object(u.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),i=Object(u.a)(l,2),s=i[0],m=i[1],d=r.a.useState(!1),p=Object(u.a)(d,2),f=p[0],v=p[1],E=r.a.useState(!1),g=Object(u.a)(E,2),b=g[0],h=g[1],N=Object(c.h)().token;if(r.a.useEffect((function(){N&&function(){var e=Object(A.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/verifyAccount/".concat(N));case 2:200===e.sent.status?m(!0):(m(!0),v(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[N]),N)return s?r.a.createElement("div",{className:"text-centered"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Verify your Intake account. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Send a verification email to the email linked to your Intake account to begin using Intake."})),r.a.createElement("h1",null,"Verify Intake Account"),f?r.a.createElement("p",null,"Invalid verification token. Please",r.a.createElement(o.c,{to:"/verify",className:"green link"}," ","request another one"," "),"."):r.a.createElement("p",null,"Your account has been verified. Please return to"," ",r.a.createElement(o.c,{to:"/login",className:"green link"},"login"),".")):r.a.createElement(la,null);var y=function(){var e=Object(A.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!1),t.preventDefault(),e.next=4,fetch("/api/user/sendVerificationToken",{method:"post",body:JSON.stringify({email:a}),headers:{"Content-Type":"application/json"}});case 4:200===e.sent.status&&h(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Login text-centered margin-top"},r.a.createElement(we.a,null,r.a.createElement("title",null,"Verify your Intake account. | INTAKE"),r.a.createElement("meta",{name:"description",content:"Send a verification email to the email linked to your Intake account to begin using Intake."})),r.a.createElement("h1",null,"Verify Intake Account"),r.a.createElement("div",{className:"vertical-padding"}),r.a.createElement("form",{onSubmit:y,className:"text-centered login-form"},r.a.createElement("div",{className:"inline-flex"},r.a.createElement(it.a,null),r.a.createElement("input",{type:"text",placeholder:"Email",className:"input-large margin-left",value:a,onChange:function(e){return n(e.target.value)}})),r.a.createElement("button",{type:"submit",className:"button-submit float-right margin-top"},"Send Verification Email")),b&&r.a.createElement("p",{className:"italics"},"Verification email sent."))},va=Object(pe.b)((function(e){return{username:e.user.username,movies:e.movies.movies,guest:e.user.guest}}),(function(e){return Object(s.b)({checkSessionLogin:K,loadMovies:de},e)}))((function(e){var t=e.username,a=e.guest,n=e.checkSessionLogin,l=e.loadMovies,i=e.movies;return t||a?!i&&t?(l(),r.a.createElement(la,null)):r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(be,null),r.a.createElement(c.d,null,r.a.createElement(ia,{path:"/movies/:id",render:function(){return r.a.createElement(rt,null)}}),r.a.createElement(ia,{path:"/movies",render:function(){return r.a.createElement(ke,null)}}),r.a.createElement(ia,{path:"/stats/:property/:value",component:We}),r.a.createElement(ia,{path:"/stats/:title",component:aa}),r.a.createElement(ia,{path:"/stats",component:We}),r.a.createElement(oa,{path:"/login",component:mt}),r.a.createElement(oa,{path:"/verify/:token",component:fa}),r.a.createElement(oa,{path:"/verify",component:fa}),r.a.createElement(oa,{path:"/createAccount",component:vt}),r.a.createElement(oa,{path:"/resetPassword/:id/:token",component:Bt}),r.a.createElement(oa,{path:"/resetPassword",component:Bt}),r.a.createElement(ia,{path:"/profile",component:Rt}),r.a.createElement(c.b,{path:"/explore/:type/:id",component:zt}),r.a.createElement(c.b,{path:"/explore/",component:zt}),r.a.createElement(c.b,{path:"/"},r.a.createElement(pa,null))),r.a.createElement("div",{className:"footer"},"\xa9 JACKSON PROWELL"))):(n(),r.a.createElement(la,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ea=a(349),ga=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(W.a)({},G),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user/LOGIN":return Object(W.a)({},t.payload,{guest:!1});case"user/LOGOUT":var a=Object(W.a)({},G);return a.guest=!0,a;case"user/LOGIN_GUEST":return e.guest=!0,Object(W.a)({},e);case"user/ADD_FRIEND":e.friends=e.friends.concat([t.payload]);var n=e.friend_requests?Object(F.a)(e.friend_requests):[],r=n.indexOf(t.payload);return n.splice(r,1),e.friend_requests=n,Object(W.a)({},e);default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"movies/SET_SEARCH":return e.search=t.payload,Object(W.a)({},e);case"movies/SET_SEARCH_RESULTS":return e.searchResults=t.payload,Object(W.a)({},e);case"movies/SET_MOVIES":return t.payload?Object.assign({movies:t.payload.sort((function(e,t){return e.title>t.title?1:-1}))}):{movies:null};case"movies/SET_TOP_MOVIES":switch(t.payload.filter){case"popularity":e.topMoviesByPopularity=t.payload.movies;break;case"entertainment":e.topMoviesByEntertainment=t.payload.movies;break;case"plot":e.topMoviesByPlot=t.payload.movies;break;case"style":e.topMoviesByStyle=t.payload.movies;break;case"bias":e.topMoviesByBias=t.payload.movies;break;case"total":e.topMoviesByTotal=t.payload.movies}return Object(W.a)({},e);case"movies/SET_FILTER":return e.filter=t.payload,Object(W.a)({},e);default:return e}},explore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"explore/SET_USER":return e.currentUser=t.payload,Object(W.a)({},e);case"explore/SET_TOP_USERS_BY_MOVIES":return e.topUsersByMovies=t.payload,Object(W.a)({},e);case"explore/SET_TOP_USERS_BY_FRIENDS":return e.topUsersByFriends=t.payload,Object(W.a)({},e);case"explore/SET_TOP_USERS_BY_REVIEWS":return e.topUsersByReviews=t.payload,Object(W.a)({},e);case"explore/SET_TOP_USERS_BY_DATE_ADDED_OLDEST":return e.topUsersByDateAddedOldest=t.payload,Object(W.a)({},e);case"explore/SET_TOP_USERS_BY_DATE_ADDED_NEWEST":return e.topUsersByDateAddedNewest=t.payload,Object(W.a)({},e);case"explore/SET_FILTER":return e.filter=t.payload,Object(W.a)({},e);case"explore/SET_SEARCH":return e.search=t.payload,Object(W.a)({},e);case"explore/SET_FEED":return e.feed=t.payload,Object(W.a)({},e);case"explore/SET_SEARCH_RESULTS":return e.searchResults=t.payload,Object(W.a)({},e);default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(W.a)({},X),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"stats/SET_GENRES":return e.genres=t.payload,Object(W.a)({},e);case"stats/SET_CONTENT_RATINGS":return e.contentRatings=t.payload,Object(W.a)({},e);case"stats/SET_DATES_ADDED":return e.datesAdded=t.payload,Object(W.a)({},e);case"stats/SET_RELEASE_DATES":return e.releaseDates=t.payload,Object(W.a)({},e);case"stats/SET_THEMES":return e.themes=t.payload,Object(W.a)({},e);case"stats/SET_RATINGS":return e.ratings=t.payload,Object(W.a)({},e);case"stats/CLEAR_STORE":return Object(W.a)({},X);default:return e}}}),ba=Object(s.d)(ga,Object(s.a)(Ea.a));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe.a,{store:ba},r.a.createElement(va,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[400,1,2]]]);
//# sourceMappingURL=main.09dc6f68.chunk.js.map